(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{1154:function(t,s){t.exports="data:image/png;base64,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"},1155:function(t,s,a){t.exports=a.p+"assets/img/SouthEast-16540632628281.afdb76f3.png"},1156:function(t,s){t.exports="data:image/png;base64,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"},1157:function(t,s,a){t.exports=a.p+"assets/img/SouthEast-16540632628293.756acf9f.jpeg"},1158:function(t,s,a){t.exports=a.p+"assets/img/SouthEast-16540632628294.ea12e8f3.jpeg"},1159:function(t,s,a){t.exports=a.p+"assets/img/SouthEast-16540632628305.9d8ba025.jpeg"},1160:function(t,s,a){t.exports=a.p+"assets/img/SouthEast-16540632628306.a4e78740.jpeg"},1161:function(t,s,a){t.exports=a.p+"assets/img/SouthEast-16540632628317.dd450fe7.jpeg"},1162:function(t,s,a){t.exports=a.p+"assets/img/SouthEast-16540632628318.aa4ed9e3.jpeg"},1701:function(t,s,a){"use strict";a.r(s);var n=a(65),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"事务控制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事务控制"}},[t._v("#")]),t._v(" 事务控制")]),t._v(" "),n("p"),n("div",{staticClass:"table-of-contents"},[n("ul",[n("li",[n("a",{attrs:{href:"#事务的基本原理"}},[t._v("事务的基本原理")])]),n("li",[n("a",{attrs:{href:"#与事务相关的理论知识"}},[t._v("与事务相关的理论知识")])]),n("li",[n("a",{attrs:{href:"#spring事务管理"}},[t._v("Spring事务管理")]),n("ul",[n("li",[n("a",{attrs:{href:"#配置事务管理器"}},[t._v("配置事务管理器")])]),n("li",[n("a",{attrs:{href:"#编程式事务管理"}},[t._v("编程式事务管理")])]),n("li",[n("a",{attrs:{href:"#声明式事务管理"}},[t._v("声明式事务管理")])])])])])]),n("p"),t._v(" "),n("h2",{attrs:{id:"事务的基本原理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#事务的基本原理"}},[t._v("#")]),t._v(" 事务的基本原理")]),t._v(" "),n("p",[t._v("Spring事务的本质其实就是数据库对事务的支持，使用JDBC的事务管理机制,就是利用java.sql.Connection对象完成对事务的提交，那在没有Spring帮我们管理事务之前，我们要怎么做。")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Connection")]),t._v(" conn "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("DriverManager")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getConnection")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setAutoCommit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将自动提交设置为false                         ")]),t._v("\n    执行CRUD操作 \n    conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("commit")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("      "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//当两个操作成功后手动提交  ")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  \n    conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("rollback")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//一旦其中一个操作出错都将回滚，所有操作都不成功")]),t._v("\n    e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  \n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("finally")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    conn"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("colse")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br")])]),n("p",[t._v("事务是一系列的动作，一旦其中有一个动作出现错误，必须全部回滚，系统将事务中对数据库的所有已完成的操作全部撤消，滚回到事务开始的状态，避免出现由于数据不一致而导致的接下来一系列的错误。事务的出现是为了确保数据的完整性和一致性，在目前企业级应用开发中，事务管理是必不可少的。")]),t._v(" "),n("p",[t._v("事务: 是一种能够保证统一个业务中多个写(增删改)操作要么全部成果,要么全部失败的机制!")]),t._v(" "),n("p",[t._v("在业务方法上添加"),n("code",[t._v("@Transactional")]),t._v("即可保证此方法是业务性(要么全部失败, 要么全部成功).")]),t._v(" "),n("p",[t._v("在Spring JDBC中, 处理事务的机制大致是")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("开启事务:  Begin\ntry{\n    你的业务方法\n    提交: Commit\n} catch(RuntimeEXception e){\n    回滚: Rollback\n}\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("p",[t._v("所以，为了保证事务性，所有的写操作在执行之后，必须有某个判定为失败的标准，且判断定为失败后，必须抛出"),n("code",[t._v("RuntimeException")]),t._v("或其子孙类异常！")]),t._v(" "),n("ul",[n("li",[t._v("Spring JDBC默认对"),n("code",[t._v("RuntimeException")]),t._v("进行回滚处理，有必要的话，也可以配置为其它异常类型")])]),t._v(" "),n("p",[t._v("当需要方法是事务性的，可以使用"),n("code",[t._v("@Transactional")]),t._v("注解，此注解可以添加在：")]),t._v(" "),n("ul",[n("li",[t._v("接口\n"),n("ul",[n("li",[t._v("会使得此接口的实现类的所有实现方法都是事务性的")])])]),t._v(" "),n("li",[t._v("接口中的抽象方法上\n"),n("ul",[n("li",[t._v("会使得此接口的实现类中，重写的此方法是事务性的")]),t._v(" "),n("li",[t._v("只作用于当前方法")]),t._v(" "),n("li",[t._v("如果接口上也配置了此注解，并且接口和抽象方法的注解均配置了参数，以方法上的配置为准")])])]),t._v(" "),n("li",[t._v("业务实现类\n"),n("ul",[n("li",[t._v("会使得当前类中所有重写的方法都是事务性\n"),n("ul",[n("li",[t._v("自定义的方法不会是事务性的")])])])])]),t._v(" "),n("li",[t._v("业务实现类中的方法\n"),n("ul",[n("li",[t._v("不可以添加在自定义的（不是重写的接口的）方法上\n"),n("ul",[n("li",[t._v("语法上，可以添加，但执行时，不允许")])])])])])]),t._v(" "),n("p",[t._v("Spring JDBC是通过接口代理的方式进行事务管理，所以，只对接口中声明的方法有效！")]),t._v(" "),n("p",[t._v("通常，应该将"),n("code",[t._v("@Transactional")]),t._v("添加在接口中的抽象方法上（如果偷懒，或为了避免遗漏，也可以直接添加在接口上）。")]),t._v(" "),n("h2",{attrs:{id:"与事务相关的理论知识"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#与事务相关的理论知识"}},[t._v("#")]),t._v(" 与事务相关的理论知识")]),t._v(" "),n("p",[t._v("众所周知，事务有四大特性（ACID）")]),t._v(" "),n("p",[t._v("1.原子性（Atomicity）事务是一个原子操作，由一系列动作组成。事务的原子性确保动作要么全部完成，要么完全不起作用。")]),t._v(" "),n("p",[t._v("2.一致性（Consistency）事务在完成时，必须是所有的数据都保持一致状态。")]),t._v(" "),n("p",[t._v("3.隔离性（Isolation）并发事务执行之间无影响，在一个事务内部的操作对其他事务是不产生影响，这需要事务隔离级别来指定隔离性。")]),t._v(" "),n("p",[t._v("4.持久性（Durability）一旦事务完成，数据库的改变必须是持久化的。")]),t._v(" "),n("p",[t._v("在企业级应用中，多用户访问数据库是常见的场景，这就是所谓的事务的并发。事务并发所可能存在的问题：\n1.脏读：一个事务读到另一个事务未提交的更新数据。\n2.不可重复读：一个事务两次读同一行数据，可是这两次读到的数据不一样。\n3.幻读：一个事务执行两次查询，但第二次查询比第一次查询多出了一些数据行。\n4.丢失更新：撤消一个事务时，把其它事务已提交的更新的数据覆盖了。")]),t._v(" "),n("p",[t._v("我们可以在java.sql.Connection中看到JDBC定义了五种事务隔离级别来解决这些并发导致的问题：")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * A constant indicating that transactions are not supported. \n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" TRANSACTION_NONE         "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * A constant indicating that\n * dirty reads, non-repeatable reads and phantom reads can occur.\n * This level allows a row changed by one transaction to be read\n * by another transaction before any changes in that row have been\n * committed (a "dirty read").  If any of the changes are rolled back, \n * the second transaction will have retrieved an invalid row.\n */')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" TRANSACTION_READ_UNCOMMITTED "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * A constant indicating that\n * dirty reads are prevented; non-repeatable reads and phantom\n * reads can occur.  This level only prohibits a transaction\n * from reading a row with uncommitted changes in it.\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" TRANSACTION_READ_COMMITTED   "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * A constant indicating that\n * dirty reads and non-repeatable reads are prevented; phantom\n * reads can occur.  This level prohibits a transaction from\n * reading a row with uncommitted changes in it, and it also\n * prohibits the situation where one transaction reads a row,\n * a second transaction alters the row, and the first transaction\n * rereads the row, getting different values the second time\n * (a "non-repeatable read").\n */')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" TRANSACTION_REPEATABLE_READ  "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('/**\n * A constant indicating that\n * dirty reads, non-repeatable reads and phantom reads are prevented.\n * This level includes the prohibitions in\n * <code>TRANSACTION_REPEATABLE_READ</code> and further prohibits the \n * situation where one transaction reads all rows that satisfy\n * a <code>WHERE</code> condition, a second transaction inserts a row that\n * satisfies that <code>WHERE</code> condition, and the first transaction\n * rereads for the same condition, retrieving the additional\n * "phantom" row in the second read.\n */')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" TRANSACTION_SERIALIZABLE     "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234567891011121314151617181920212223242526272829303132333435363738394041424344454647")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br")])]),n("p",[t._v("翻译过来这几个常量就是\nTRANSACTION_NONE JDBC 驱动不支持事务\nTRANSACTION_READ_UNCOMMITTED 允许脏读、不可重复读和幻读。\nTRANSACTION_READ_COMMITTED 禁止脏读，但允许不可重复读和幻读。\nTRANSACTION_REPEATABLE_READ 禁止脏读和不可重复读，单运行幻读。\nTRANSACTION_SERIALIZABLE 禁止脏读、不可重复读和幻读。")]),t._v(" "),n("p",[t._v("隔离级别越高，意味着数据库事务并发执行性能越差，能处理的操作就越少。你可以通过conn.setTransactionLevel去设置你需要的隔离级别。\nJDBC规范虽然定义了事务的以上支持行为，但是各个JDBC驱动，数据库厂商对事务的支持程度可能各不相同。\n出于性能的考虑我们一般设置TRANSACTION_READ_COMMITTED就差不多了，剩下的通过使用数据库的锁来帮我们处理别的，关于数据库的锁这个之后再说。")]),t._v(" "),n("p",[t._v("了解了基本的JDBC事务，那有了Spring，在事务管理上会有什么新的改变呢？\n有了Spring，我们再也无需要去处理获得连接、关闭连接、事务提交和回滚等这些操作，使得我们把更多的精力放在处理业务上。事实上Spring并不直接管理事务，而是提供了多种事务管理器。他们将事务管理的职责委托给Hibernate或者JTA等持久化机制所提供的相关平台框架的事务来实现。")]),t._v(" "),n("h2",{attrs:{id:"spring事务管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#spring事务管理"}},[t._v("#")]),t._v(" Spring事务管理")]),t._v(" "),n("p",[t._v("Spring事务管理的核心接口是PlatformTransactionManager")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1154),alt:"这里写图片描述"}})]),t._v(" "),n("p",[t._v("事务管理器接口通过getTransaction(TransactionDefinition definition)方法根据指定的传播行为返回当前活动的事务或创建一个新的事务，这个方法里面的参数是TransactionDefinition类，这个类就定义了一些基本的事务属性。\n在TransactionDefinition接口中定义了它自己的传播行为和隔离级别")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1155),alt:"这里写图片描述"}})]),t._v(" "),n("p",[t._v("除去常量，主要的方法有：")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getIsolationLevel")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回事务的隔离级别")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getName")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回事务的名称")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getPropagationBehavior")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回事务的传播行为")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("int")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("getTimeout")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 返回事务必须在多少秒内完成")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isReadOnly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 事务是否只读，事务管理器能够根据这个返回值进行优化，确保事务是只读的12345")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br")])]),n("h4",{attrs:{id:"spring事务的传播属性"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#spring事务的传播属性"}},[t._v("#")]),t._v(" Spring事务的传播属性")]),t._v(" "),n("p",[t._v("由上图可知，Spring定义了7个以PROPAGATION_开头的常量表示它的传播属性。")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("名称")]),t._v(" "),n("th",[t._v("值")]),t._v(" "),n("th",[t._v("解释")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("PROPAGATION_REQUIRED")]),t._v(" "),n("td",[t._v("0")]),t._v(" "),n("td",[t._v("支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择，也是Spring默认的事务的传播。")])]),t._v(" "),n("tr",[n("td",[t._v("PROPAGATION_SUPPORTS")]),t._v(" "),n("td",[t._v("1")]),t._v(" "),n("td",[t._v("支持当前事务，如果当前没有事务，就以非事务方式执行。")])]),t._v(" "),n("tr",[n("td",[t._v("PROPAGATION_MANDATORY")]),t._v(" "),n("td",[t._v("2")]),t._v(" "),n("td",[t._v("支持当前事务，如果当前没有事务，就抛出异常。")])]),t._v(" "),n("tr",[n("td",[t._v("PROPAGATION_REQUIRES_NEW")]),t._v(" "),n("td",[t._v("3")]),t._v(" "),n("td",[t._v("新建事务，如果当前存在事务，把当前事务挂起。")])]),t._v(" "),n("tr",[n("td",[t._v("PROPAGATION_NOT_SUPPORTED")]),t._v(" "),n("td",[t._v("4")]),t._v(" "),n("td",[t._v("以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。")])]),t._v(" "),n("tr",[n("td",[t._v("PROPAGATION_NEVER")]),t._v(" "),n("td",[t._v("5")]),t._v(" "),n("td",[t._v("以非事务方式执行，如果当前存在事务，则抛出异常。")])]),t._v(" "),n("tr",[n("td",[t._v("PROPAGATION_NESTED")]),t._v(" "),n("td",[t._v("6")]),t._v(" "),n("td",[t._v("如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则进行与PROPAGATION_REQUIRED类似的操作。")])])])]),t._v(" "),n("h4",{attrs:{id:"spring事务的隔离级别"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#spring事务的隔离级别"}},[t._v("#")]),t._v(" Spring事务的隔离级别")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("名称")]),t._v(" "),n("th",[t._v("值")]),t._v(" "),n("th",[t._v("解释")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("ISOLATION_DEFAULT")]),t._v(" "),n("td",[t._v("-1")]),t._v(" "),n("td",[t._v("这是一个PlatfromTransactionManager默认的隔离级别，使用数据库默认的事务隔离级别。另外四个与JDBC的隔离级别相对应")])]),t._v(" "),n("tr",[n("td",[t._v("ISOLATION_READ_UNCOMMITTED")]),t._v(" "),n("td",[t._v("1")]),t._v(" "),n("td",[t._v("这是事务最低的隔离级别，它充许另外一个事务可以看到这个事务未提交的数据。这种隔离级别会产生脏读，不可重复读和幻读。")])]),t._v(" "),n("tr",[n("td",[t._v("ISOLATION_READ_COMMITTED")]),t._v(" "),n("td",[t._v("2")]),t._v(" "),n("td",[t._v("保证一个事务修改的数据提交后才能被另外一个事务读取。另外一个事务不能读取该事务未提交的数据。")])]),t._v(" "),n("tr",[n("td",[t._v("ISOLATION_REPEATABLE_READ")]),t._v(" "),n("td",[t._v("4")]),t._v(" "),n("td",[t._v("这种事务隔离级别可以防止脏读，不可重复读。但是可能出现幻读。")])]),t._v(" "),n("tr",[n("td",[t._v("ISOLATION_SERIALIZABLE")]),t._v(" "),n("td",[t._v("8")]),t._v(" "),n("td",[t._v("这是花费最高代价但是最可靠的事务隔离级别。事务被处理为顺序执行。除了防止脏读，不可重复读外，还避免了幻读。")])])])]),t._v(" "),n("p",[t._v("调用PlatformTransactionManager接口的getTransaction()的方法得到的是TransactionStatus接口的一个实现\nTransactionStatus接口")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1156),alt:"这里写图片描述"}})]),t._v(" "),n("p",[t._v("主要的方法有：")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("flush")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//如果适用的话，这个方法用于刷新底层会话中的修改到数据库，例如，所有受影响的Hibernate/JPA会话。")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("hasSavepoint")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否有恢复点")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isCompleted")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否已完成")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isNewTransaction")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否是新的事务")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("isRollbackOnly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 是否为只回滚")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRollbackOnly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置为只回滚123456")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br")])]),n("p",[t._v("可以看出返回的结果是一些事务的状态，可用来检索事务的状态信息。")]),t._v(" "),n("h3",{attrs:{id:"配置事务管理器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#配置事务管理器"}},[t._v("#")]),t._v(" 配置事务管理器")]),t._v(" "),n("p",[t._v("介绍完Spring事务的管理的流程大概是怎么走的。接下来可以动手试试Spring是如何配置事务管理器的\n例如我在spring-mybatis中配置的:")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 配置事务管理器 --\x3e")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("transactionManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.springframework.jdbc.datasource.DataSourceTransactionManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dataSource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dataSource"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1234\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br")])]),n("p",[t._v("这配置不是唯一的，可以根据自己项目选择的数据访问框架灵活配置事务管理器")]),t._v(" "),n("p",[t._v("配置了事务管理器后，事务当然还是得我们自己去操作，Spring提供了两种事务管理的方式：编程式事务管理和声明式事务管理，让我们分别看看它们是怎么做的吧。")]),t._v(" "),n("h3",{attrs:{id:"编程式事务管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#编程式事务管理"}},[t._v("#")]),t._v(" 编程式事务管理")]),t._v(" "),n("p",[t._v("编程式事务管理我们可以通过PlatformTransactionManager实现来进行事务管理，同样的Spring也为我们提供了模板类TransactionTemplate进行事务管理，下面主要介绍模板类，我们需要在配置文件中配置")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--配置事务管理的模板--\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("bean")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("transactionTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("org.springframework.transaction.support.TransactionTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("transactionManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("transactionManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!--定义事务隔离级别,-1表示使用数据库默认级别--\x3e")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("isolationLevelName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("ISOLATION_DEFAULT"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("property")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("propagationBehaviorName"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("value")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("PROPAGATION_REQUIRED"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("property")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("bean")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("1234567\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])]),n("p",[t._v("TransactionTemplate帮我们封装了许多代码，节省了我们的工作。下面我们写个单元测试来测测。\n为了测试事务回滚，专门建了一张tbl_accont表，用于模拟存钱的一个场景。service层主要代码如下\nBaseSeviceImpl")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//方便测试直接写的sql")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        dao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertSql")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果flag 为 true ，抛出异常")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"has exception!!!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取总金额")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" dao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br")])]),n("p",[t._v("dao对应的sum方法")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("select")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sum"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("resultType")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("java.lang.Integer"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        SELECT SUM(money) FROM tbl_account;\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),t._v("select")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("123\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("p",[t._v("下面看看测试代码")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("package")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gray")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gray"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("service"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseSevice")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Test")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("runner"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("RunWith")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("beans"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("factory"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Autowired")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("ContextConfiguration")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("test"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("context"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("junit4"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringJUnit4ClassRunner")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionStatus")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionCallbackWithoutResult")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("springframework"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("transaction"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("support"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionTemplate")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token import"}},[n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("javax"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("annotation"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Resource")])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/**\n * Created by gray on 2017/4/8.\n */")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@RunWith")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("SpringJUnit4ClassRunner")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@ContextConfiguration")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("locations "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"classpath:spring-test.xml"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionTest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Resource")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionTemplate")]),t._v(" transactionTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Autowired")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("private")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("BaseSevice")]),t._v(" baseSevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transTest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"before transaction"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" sum1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" baseSevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"before transaction sum: "')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("sum1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transaction...."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        transactionTemplate"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("execute")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionCallbackWithoutResult")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Override")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("protected")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("doInTransactionWithoutResult")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("TransactionStatus")]),t._v(" status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    baseSevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INSERT INTO tbl_account VALUES (100);"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    baseSevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INSERT INTO tbl_account VALUES (100);"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//对于抛出Exception类型的异常且需要回滚时,需要捕获异常并通过调用status对象的setRollbackOnly()方法告知事务管理器当前事务需要回滚")]),t._v("\n                    status"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("setRollbackOnly")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                    e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n                "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n           "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"after transaction"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" sum2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" baseSevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"after transaction sum: "')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("sum2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br")])]),n("p",[t._v("当baseSevice.insert的第二个参数为false时，我们假设插入数据没有出现任何问题，测试结果如图所示：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1157),alt:"这里写图片描述"}})]),t._v(" "),n("p",[t._v("当第二个参数为true时，insert会抛出一个异常，这是事务就应该回滚，数据前后不应该有变化，如图所示：")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1158),alt:"这里写图片描述"}})]),t._v(" "),n("h3",{attrs:{id:"声明式事务管理"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#声明式事务管理"}},[t._v("#")]),t._v(" 声明式事务管理")]),t._v(" "),n("p",[t._v("声明式事务管理有两种常用的方式，一种是基于tx和aop命名空间的xml配置文件，一种是基于@Transactional注解，随着Spring和Java的版本越来越高，大家越趋向于使用注解的方式，下面我们两个都说。\n"),n("strong",[t._v("1.基于tx和aop命名空间的xml配置文件")]),t._v("\n配置文件")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("advice")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("advice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("transaction-manager")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("transactionManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("attributes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("method")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("name")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("insert"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("propagation")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("REQUIRED"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("read-only")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("false"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("  "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rollback-for")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("Exception"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("attributes")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("advice")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("aop:")]),t._v("config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("aop:")]),t._v("pointcut")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pointCut"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("expression")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("execution (* com.gray.service.*.*(..))"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("aop:")]),t._v("advisor")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("advice-ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("advice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("pointcut-ref")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("pointCut"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("</")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("aop:")]),t._v("config")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("12345678910\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br")])]),n("p",[t._v("测试代码")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Test")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("transTest")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"before transaction"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" sum1 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" baseSevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"before transaction sum: "')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("sum1"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"transaction...."')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            baseSevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"INSERT INTO tbl_account VALUES (100);"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            e"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("printStackTrace")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"after transaction"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Integer")]),t._v(" sum2 "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" baseSevice"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("System")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("println")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"after transaction sum: "')]),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),t._v("sum2"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br")])]),n("p",[t._v("事务正常执行结果截图")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1159),alt:"这里写图片描述"}})]),t._v(" "),n("p",[t._v("事务出现异常结果截图")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1160),alt:"这里写图片描述"}})]),t._v(" "),n("p",[n("strong",[t._v("2.基于@Transactional注解")]),t._v("\n这种方式最简单，也是最为常用的，只需要在配置文件中开启对注解事务管理的支持。")]),t._v(" "),n("div",{staticClass:"language-xml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("\x3c!-- 声明式事务管理 配置事物的注解方式注入--\x3e")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token tag"}},[n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),n("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("tx:")]),t._v("annotation-driven")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("transaction-manager")]),n("span",{pre:!0,attrs:{class:"token attr-value"}},[n("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("transactionManager"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("12\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("p",[t._v("然后在需要事务管理的地方加上@Transactional注解，如：")]),t._v(" "),n("div",{staticClass:"language-java line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-java"}},[n("code",[t._v("    "),n("span",{pre:!0,attrs:{class:"token annotation punctuation"}},[t._v("@Transactional")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rollbackFor"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("public")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("void")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insert")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("String")]),t._v(" sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("boolean")]),t._v(" flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throws")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        dao"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("insertSql")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sql"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如果flag 为 true ，抛出异常")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("flag"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("throw")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Exception")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"has exception!!!"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("p",[t._v("rollbackFor属性指定出现Exception异常的时候回滚，遇到检查性的异常需要回滚，默认情况下非检查性异常，包括error也会自动回滚。\n测试代码和上面那个一样\n事务正常执行结果截图")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1161),alt:"这里写图片描述"}})]),t._v(" "),n("p",[t._v("事务出现异常结果截图")]),t._v(" "),n("p",[n("img",{attrs:{src:a(1162),alt:"这里写图片描述"}})]),t._v(" "),n("p",[t._v("以上就是对Spring事务进行了详细的分析和代码示例。")])])}),[],!1,null,null,null);s.default=e.exports}}]);