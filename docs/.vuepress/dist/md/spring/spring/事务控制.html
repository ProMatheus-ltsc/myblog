<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>事务控制 | MyBlog</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content="包含: Java 基础, JVM, Spring, Spring Boot, Spring Cloud, MySQL, ElasticSearch, MongoDB, Docker, k8s, Linux, DevOps, 分布式,  开发工具, Git, IDE...">
    
    <link rel="preload" href="/matheusblog/assets/css/0.styles.980a01be.css" as="style"><link rel="preload" href="/matheusblog/assets/js/app.395f5a95.js" as="script"><link rel="preload" href="/matheusblog/assets/js/3.f2f9a77d.js" as="script"><link rel="preload" href="/matheusblog/assets/js/42.04e054a9.js" as="script"><link rel="prefetch" href="/matheusblog/assets/js/10.bf3342de.js"><link rel="prefetch" href="/matheusblog/assets/js/100.4cdef241.js"><link rel="prefetch" href="/matheusblog/assets/js/101.98a8347e.js"><link rel="prefetch" href="/matheusblog/assets/js/102.40fd7c0a.js"><link rel="prefetch" href="/matheusblog/assets/js/103.4cd39524.js"><link rel="prefetch" href="/matheusblog/assets/js/104.4a7e8bbf.js"><link rel="prefetch" href="/matheusblog/assets/js/105.1cc517dc.js"><link rel="prefetch" href="/matheusblog/assets/js/106.740b9511.js"><link rel="prefetch" href="/matheusblog/assets/js/107.35db94f1.js"><link rel="prefetch" href="/matheusblog/assets/js/108.7ac64d1e.js"><link rel="prefetch" href="/matheusblog/assets/js/109.e6a1106d.js"><link rel="prefetch" href="/matheusblog/assets/js/11.e509f5de.js"><link rel="prefetch" href="/matheusblog/assets/js/110.95ef8be3.js"><link rel="prefetch" href="/matheusblog/assets/js/111.7a203dc8.js"><link rel="prefetch" href="/matheusblog/assets/js/112.413ad74e.js"><link rel="prefetch" href="/matheusblog/assets/js/113.e989d1fa.js"><link rel="prefetch" href="/matheusblog/assets/js/114.a4de3397.js"><link rel="prefetch" href="/matheusblog/assets/js/115.e85d06e8.js"><link rel="prefetch" href="/matheusblog/assets/js/116.1899a055.js"><link rel="prefetch" href="/matheusblog/assets/js/117.1fdcdf1c.js"><link rel="prefetch" href="/matheusblog/assets/js/118.6abe0fc9.js"><link rel="prefetch" href="/matheusblog/assets/js/119.6f74471a.js"><link rel="prefetch" href="/matheusblog/assets/js/12.14e3a713.js"><link rel="prefetch" href="/matheusblog/assets/js/120.c41fb230.js"><link rel="prefetch" href="/matheusblog/assets/js/121.3a77bbbd.js"><link rel="prefetch" href="/matheusblog/assets/js/122.fafbc4f7.js"><link rel="prefetch" href="/matheusblog/assets/js/123.1cefa825.js"><link rel="prefetch" href="/matheusblog/assets/js/124.db9ce425.js"><link rel="prefetch" href="/matheusblog/assets/js/125.b4bcbbbf.js"><link rel="prefetch" href="/matheusblog/assets/js/126.e97022a9.js"><link rel="prefetch" href="/matheusblog/assets/js/127.be431439.js"><link rel="prefetch" href="/matheusblog/assets/js/128.39cae4c7.js"><link rel="prefetch" href="/matheusblog/assets/js/129.05b57755.js"><link rel="prefetch" href="/matheusblog/assets/js/13.b74967a2.js"><link rel="prefetch" href="/matheusblog/assets/js/130.b369a649.js"><link rel="prefetch" href="/matheusblog/assets/js/131.a32240e7.js"><link rel="prefetch" href="/matheusblog/assets/js/132.8bf655b9.js"><link rel="prefetch" href="/matheusblog/assets/js/133.9a1ec78c.js"><link rel="prefetch" href="/matheusblog/assets/js/134.bc124db1.js"><link rel="prefetch" href="/matheusblog/assets/js/135.ee907ef3.js"><link rel="prefetch" href="/matheusblog/assets/js/136.d4f5b5f6.js"><link rel="prefetch" href="/matheusblog/assets/js/137.6f249ca1.js"><link rel="prefetch" href="/matheusblog/assets/js/138.90b80146.js"><link rel="prefetch" href="/matheusblog/assets/js/139.1c61b5e2.js"><link rel="prefetch" href="/matheusblog/assets/js/14.6984257d.js"><link rel="prefetch" href="/matheusblog/assets/js/140.b84b42c7.js"><link rel="prefetch" href="/matheusblog/assets/js/141.ac6f49f1.js"><link rel="prefetch" href="/matheusblog/assets/js/142.c76f33ed.js"><link rel="prefetch" href="/matheusblog/assets/js/143.3857c33e.js"><link rel="prefetch" href="/matheusblog/assets/js/144.4974c73c.js"><link rel="prefetch" href="/matheusblog/assets/js/145.65ee0573.js"><link rel="prefetch" href="/matheusblog/assets/js/146.21e04b58.js"><link rel="prefetch" href="/matheusblog/assets/js/147.5915f70e.js"><link rel="prefetch" href="/matheusblog/assets/js/148.ff739b6f.js"><link rel="prefetch" href="/matheusblog/assets/js/149.74983ad8.js"><link rel="prefetch" href="/matheusblog/assets/js/15.b9bef1b4.js"><link rel="prefetch" href="/matheusblog/assets/js/150.a18db4cf.js"><link rel="prefetch" href="/matheusblog/assets/js/151.265df11f.js"><link rel="prefetch" href="/matheusblog/assets/js/152.86e8db3a.js"><link rel="prefetch" href="/matheusblog/assets/js/153.80e87d83.js"><link rel="prefetch" href="/matheusblog/assets/js/154.18f4852f.js"><link rel="prefetch" href="/matheusblog/assets/js/155.76d3305d.js"><link rel="prefetch" href="/matheusblog/assets/js/156.b62aaf70.js"><link rel="prefetch" href="/matheusblog/assets/js/157.66d1a261.js"><link rel="prefetch" href="/matheusblog/assets/js/158.254d7eb6.js"><link rel="prefetch" href="/matheusblog/assets/js/159.fcbc1d34.js"><link rel="prefetch" href="/matheusblog/assets/js/16.a6344097.js"><link rel="prefetch" href="/matheusblog/assets/js/160.2abf5f54.js"><link rel="prefetch" href="/matheusblog/assets/js/161.51db96df.js"><link rel="prefetch" href="/matheusblog/assets/js/162.5be1abbc.js"><link rel="prefetch" href="/matheusblog/assets/js/163.88b373be.js"><link rel="prefetch" href="/matheusblog/assets/js/164.5190887f.js"><link rel="prefetch" href="/matheusblog/assets/js/165.a2bb1b51.js"><link rel="prefetch" href="/matheusblog/assets/js/166.ec2f23d4.js"><link rel="prefetch" href="/matheusblog/assets/js/167.05b1bdfc.js"><link rel="prefetch" href="/matheusblog/assets/js/168.9019a91e.js"><link rel="prefetch" href="/matheusblog/assets/js/169.cba26f51.js"><link rel="prefetch" href="/matheusblog/assets/js/17.e1094dc3.js"><link rel="prefetch" href="/matheusblog/assets/js/170.c4230285.js"><link rel="prefetch" href="/matheusblog/assets/js/171.18654774.js"><link rel="prefetch" href="/matheusblog/assets/js/172.0244e387.js"><link rel="prefetch" href="/matheusblog/assets/js/173.6bdffe3f.js"><link rel="prefetch" href="/matheusblog/assets/js/174.06206658.js"><link rel="prefetch" href="/matheusblog/assets/js/175.ade3e5c7.js"><link rel="prefetch" href="/matheusblog/assets/js/176.bf1d012d.js"><link rel="prefetch" href="/matheusblog/assets/js/177.e1fa1fce.js"><link rel="prefetch" href="/matheusblog/assets/js/178.845745ad.js"><link rel="prefetch" href="/matheusblog/assets/js/179.654a9865.js"><link rel="prefetch" href="/matheusblog/assets/js/18.56a3482d.js"><link rel="prefetch" href="/matheusblog/assets/js/180.ed0d066e.js"><link rel="prefetch" href="/matheusblog/assets/js/181.2530c7fc.js"><link rel="prefetch" href="/matheusblog/assets/js/182.548ced11.js"><link rel="prefetch" href="/matheusblog/assets/js/183.ec9d3e73.js"><link rel="prefetch" href="/matheusblog/assets/js/184.e7dee0d7.js"><link rel="prefetch" href="/matheusblog/assets/js/185.73340295.js"><link rel="prefetch" href="/matheusblog/assets/js/186.3e167034.js"><link rel="prefetch" href="/matheusblog/assets/js/187.4ed12de4.js"><link rel="prefetch" href="/matheusblog/assets/js/188.106fe34a.js"><link rel="prefetch" href="/matheusblog/assets/js/189.efa75df9.js"><link rel="prefetch" href="/matheusblog/assets/js/19.d0470bb5.js"><link rel="prefetch" href="/matheusblog/assets/js/190.a6a15ac7.js"><link rel="prefetch" href="/matheusblog/assets/js/191.c9896621.js"><link rel="prefetch" href="/matheusblog/assets/js/192.2523562d.js"><link rel="prefetch" href="/matheusblog/assets/js/193.8cdf9244.js"><link rel="prefetch" href="/matheusblog/assets/js/194.ec8369f4.js"><link rel="prefetch" href="/matheusblog/assets/js/195.91b30eef.js"><link rel="prefetch" href="/matheusblog/assets/js/196.bfca5fe4.js"><link rel="prefetch" href="/matheusblog/assets/js/197.785e5070.js"><link rel="prefetch" href="/matheusblog/assets/js/198.a9fd5a25.js"><link rel="prefetch" href="/matheusblog/assets/js/199.bc71bb7f.js"><link rel="prefetch" href="/matheusblog/assets/js/2.50a375f0.js"><link rel="prefetch" href="/matheusblog/assets/js/20.de3e691f.js"><link rel="prefetch" href="/matheusblog/assets/js/200.a2870cab.js"><link rel="prefetch" href="/matheusblog/assets/js/201.b5e61ebf.js"><link rel="prefetch" href="/matheusblog/assets/js/202.9a608bdc.js"><link rel="prefetch" href="/matheusblog/assets/js/203.379dbf3d.js"><link rel="prefetch" href="/matheusblog/assets/js/204.77d00dbc.js"><link rel="prefetch" href="/matheusblog/assets/js/205.deb21882.js"><link rel="prefetch" href="/matheusblog/assets/js/206.485d92ca.js"><link rel="prefetch" href="/matheusblog/assets/js/207.bb244e96.js"><link rel="prefetch" href="/matheusblog/assets/js/208.860107fb.js"><link rel="prefetch" href="/matheusblog/assets/js/209.780de087.js"><link rel="prefetch" href="/matheusblog/assets/js/21.951b9388.js"><link rel="prefetch" href="/matheusblog/assets/js/210.bbd0d30b.js"><link rel="prefetch" href="/matheusblog/assets/js/211.dba1f646.js"><link rel="prefetch" href="/matheusblog/assets/js/212.03df3f22.js"><link rel="prefetch" href="/matheusblog/assets/js/213.56b1755b.js"><link rel="prefetch" href="/matheusblog/assets/js/214.d0ec78ad.js"><link rel="prefetch" href="/matheusblog/assets/js/215.159c34e3.js"><link rel="prefetch" href="/matheusblog/assets/js/216.0fbba413.js"><link rel="prefetch" href="/matheusblog/assets/js/217.45ea9b60.js"><link rel="prefetch" href="/matheusblog/assets/js/218.c18c6c25.js"><link rel="prefetch" href="/matheusblog/assets/js/219.85bd1723.js"><link rel="prefetch" href="/matheusblog/assets/js/22.fd17b556.js"><link rel="prefetch" href="/matheusblog/assets/js/220.64f05f9e.js"><link rel="prefetch" href="/matheusblog/assets/js/221.b36552f2.js"><link rel="prefetch" href="/matheusblog/assets/js/222.260044a6.js"><link rel="prefetch" href="/matheusblog/assets/js/223.23257682.js"><link rel="prefetch" href="/matheusblog/assets/js/224.3c36b6bd.js"><link rel="prefetch" href="/matheusblog/assets/js/225.aa1e6908.js"><link rel="prefetch" href="/matheusblog/assets/js/226.9206ae95.js"><link rel="prefetch" href="/matheusblog/assets/js/227.63b9cd89.js"><link rel="prefetch" href="/matheusblog/assets/js/228.b3316ba0.js"><link rel="prefetch" href="/matheusblog/assets/js/229.9fbe533e.js"><link rel="prefetch" href="/matheusblog/assets/js/23.38cd808d.js"><link rel="prefetch" href="/matheusblog/assets/js/230.bea20cae.js"><link rel="prefetch" href="/matheusblog/assets/js/231.6ca9fca5.js"><link rel="prefetch" href="/matheusblog/assets/js/232.dd922df4.js"><link rel="prefetch" href="/matheusblog/assets/js/233.7cdab639.js"><link rel="prefetch" href="/matheusblog/assets/js/234.ee626390.js"><link rel="prefetch" href="/matheusblog/assets/js/235.2408f231.js"><link rel="prefetch" href="/matheusblog/assets/js/236.74178613.js"><link rel="prefetch" href="/matheusblog/assets/js/237.5af843da.js"><link rel="prefetch" href="/matheusblog/assets/js/238.4cfca5b2.js"><link rel="prefetch" href="/matheusblog/assets/js/239.6ef60d2f.js"><link rel="prefetch" href="/matheusblog/assets/js/24.17100d81.js"><link rel="prefetch" href="/matheusblog/assets/js/240.7683e593.js"><link rel="prefetch" href="/matheusblog/assets/js/241.b49d4b69.js"><link rel="prefetch" href="/matheusblog/assets/js/242.c9034a4c.js"><link rel="prefetch" href="/matheusblog/assets/js/243.15a73bcc.js"><link rel="prefetch" href="/matheusblog/assets/js/244.90826bdf.js"><link rel="prefetch" href="/matheusblog/assets/js/245.cdc939f8.js"><link rel="prefetch" href="/matheusblog/assets/js/246.00406d41.js"><link rel="prefetch" href="/matheusblog/assets/js/247.622955c9.js"><link rel="prefetch" href="/matheusblog/assets/js/248.cf0f8ae8.js"><link rel="prefetch" href="/matheusblog/assets/js/249.28911a84.js"><link rel="prefetch" href="/matheusblog/assets/js/25.4c35b3b7.js"><link rel="prefetch" href="/matheusblog/assets/js/250.9259e338.js"><link rel="prefetch" href="/matheusblog/assets/js/251.c5c47a5d.js"><link rel="prefetch" href="/matheusblog/assets/js/252.f85216c0.js"><link rel="prefetch" href="/matheusblog/assets/js/253.f356a1da.js"><link rel="prefetch" href="/matheusblog/assets/js/254.0a53ef08.js"><link rel="prefetch" href="/matheusblog/assets/js/255.64fbfe37.js"><link rel="prefetch" href="/matheusblog/assets/js/256.47051c86.js"><link rel="prefetch" href="/matheusblog/assets/js/257.11cf3a74.js"><link rel="prefetch" href="/matheusblog/assets/js/258.6cb15548.js"><link rel="prefetch" href="/matheusblog/assets/js/259.d967e052.js"><link rel="prefetch" href="/matheusblog/assets/js/26.ada22dc8.js"><link rel="prefetch" href="/matheusblog/assets/js/260.0d00021e.js"><link rel="prefetch" href="/matheusblog/assets/js/261.a4a60768.js"><link rel="prefetch" href="/matheusblog/assets/js/262.32866279.js"><link rel="prefetch" href="/matheusblog/assets/js/263.65c0dad7.js"><link rel="prefetch" href="/matheusblog/assets/js/264.d2bfe62d.js"><link rel="prefetch" href="/matheusblog/assets/js/265.7781160f.js"><link rel="prefetch" href="/matheusblog/assets/js/266.79c8242a.js"><link rel="prefetch" href="/matheusblog/assets/js/267.fd66fbff.js"><link rel="prefetch" href="/matheusblog/assets/js/268.da362bc0.js"><link rel="prefetch" href="/matheusblog/assets/js/269.763ad19d.js"><link rel="prefetch" href="/matheusblog/assets/js/27.ae2cd7b5.js"><link rel="prefetch" href="/matheusblog/assets/js/270.52e686a3.js"><link rel="prefetch" href="/matheusblog/assets/js/271.0f5b5f5d.js"><link rel="prefetch" href="/matheusblog/assets/js/272.7d6c01fe.js"><link rel="prefetch" href="/matheusblog/assets/js/273.735af890.js"><link rel="prefetch" href="/matheusblog/assets/js/274.cb8d2b05.js"><link rel="prefetch" href="/matheusblog/assets/js/275.6664eac7.js"><link rel="prefetch" href="/matheusblog/assets/js/276.3dd11b2a.js"><link rel="prefetch" href="/matheusblog/assets/js/277.0dd88917.js"><link rel="prefetch" href="/matheusblog/assets/js/278.c996a3aa.js"><link rel="prefetch" href="/matheusblog/assets/js/279.9e9899a4.js"><link rel="prefetch" href="/matheusblog/assets/js/28.5ac31af0.js"><link rel="prefetch" href="/matheusblog/assets/js/280.b162ff9b.js"><link rel="prefetch" href="/matheusblog/assets/js/281.86ed8760.js"><link rel="prefetch" href="/matheusblog/assets/js/282.188536ec.js"><link rel="prefetch" href="/matheusblog/assets/js/283.cfba73e5.js"><link rel="prefetch" href="/matheusblog/assets/js/284.ee227089.js"><link rel="prefetch" href="/matheusblog/assets/js/285.c78b78d1.js"><link rel="prefetch" href="/matheusblog/assets/js/286.e69d01be.js"><link rel="prefetch" href="/matheusblog/assets/js/287.8df21a55.js"><link rel="prefetch" href="/matheusblog/assets/js/288.9c9bddb0.js"><link rel="prefetch" href="/matheusblog/assets/js/289.dd376174.js"><link rel="prefetch" href="/matheusblog/assets/js/29.172a933a.js"><link rel="prefetch" href="/matheusblog/assets/js/290.05ce8f02.js"><link rel="prefetch" href="/matheusblog/assets/js/291.51d704fe.js"><link rel="prefetch" href="/matheusblog/assets/js/292.c2c07003.js"><link rel="prefetch" href="/matheusblog/assets/js/293.bb3ff119.js"><link rel="prefetch" href="/matheusblog/assets/js/294.b89b5582.js"><link rel="prefetch" href="/matheusblog/assets/js/295.48c926db.js"><link rel="prefetch" href="/matheusblog/assets/js/296.1a4647b5.js"><link rel="prefetch" href="/matheusblog/assets/js/297.2109c5af.js"><link rel="prefetch" href="/matheusblog/assets/js/298.5712fc98.js"><link rel="prefetch" href="/matheusblog/assets/js/299.867c1f25.js"><link rel="prefetch" href="/matheusblog/assets/js/30.275e3135.js"><link rel="prefetch" href="/matheusblog/assets/js/31.a06da301.js"><link rel="prefetch" href="/matheusblog/assets/js/32.673ecebd.js"><link rel="prefetch" href="/matheusblog/assets/js/33.6a439a11.js"><link rel="prefetch" href="/matheusblog/assets/js/34.e3bf59c4.js"><link rel="prefetch" href="/matheusblog/assets/js/35.dd969ca3.js"><link rel="prefetch" href="/matheusblog/assets/js/36.da08fdc7.js"><link rel="prefetch" href="/matheusblog/assets/js/37.278f8a6f.js"><link rel="prefetch" href="/matheusblog/assets/js/38.b5a3b769.js"><link rel="prefetch" href="/matheusblog/assets/js/39.e6eb9779.js"><link rel="prefetch" href="/matheusblog/assets/js/4.aae60384.js"><link rel="prefetch" href="/matheusblog/assets/js/40.89fbbd63.js"><link rel="prefetch" href="/matheusblog/assets/js/41.b146d6d2.js"><link rel="prefetch" href="/matheusblog/assets/js/43.4e0b1f16.js"><link rel="prefetch" href="/matheusblog/assets/js/44.a101d1b4.js"><link rel="prefetch" href="/matheusblog/assets/js/45.cb57adc5.js"><link rel="prefetch" href="/matheusblog/assets/js/46.92f59b41.js"><link rel="prefetch" href="/matheusblog/assets/js/47.4ebdfb17.js"><link rel="prefetch" href="/matheusblog/assets/js/48.ded8cd63.js"><link rel="prefetch" href="/matheusblog/assets/js/49.c9850f70.js"><link rel="prefetch" href="/matheusblog/assets/js/5.faf8c911.js"><link rel="prefetch" href="/matheusblog/assets/js/50.fcbd7281.js"><link rel="prefetch" href="/matheusblog/assets/js/51.b964bd8c.js"><link rel="prefetch" href="/matheusblog/assets/js/52.81a45080.js"><link rel="prefetch" href="/matheusblog/assets/js/53.03f997f7.js"><link rel="prefetch" href="/matheusblog/assets/js/54.504244b6.js"><link rel="prefetch" href="/matheusblog/assets/js/55.4f13eb19.js"><link rel="prefetch" href="/matheusblog/assets/js/56.8940be9b.js"><link rel="prefetch" href="/matheusblog/assets/js/57.b54b61e5.js"><link rel="prefetch" href="/matheusblog/assets/js/58.c741499c.js"><link rel="prefetch" href="/matheusblog/assets/js/59.2a6fe4b2.js"><link rel="prefetch" href="/matheusblog/assets/js/6.69f34e24.js"><link rel="prefetch" href="/matheusblog/assets/js/60.9b42c2c9.js"><link rel="prefetch" href="/matheusblog/assets/js/61.475ec942.js"><link rel="prefetch" href="/matheusblog/assets/js/62.379afa24.js"><link rel="prefetch" href="/matheusblog/assets/js/63.254bd86f.js"><link rel="prefetch" href="/matheusblog/assets/js/64.97719bc7.js"><link rel="prefetch" href="/matheusblog/assets/js/65.f7d7f7b3.js"><link rel="prefetch" href="/matheusblog/assets/js/66.858254b0.js"><link rel="prefetch" href="/matheusblog/assets/js/67.04b87cc3.js"><link rel="prefetch" href="/matheusblog/assets/js/68.561526c4.js"><link rel="prefetch" href="/matheusblog/assets/js/69.a2d02fdc.js"><link rel="prefetch" href="/matheusblog/assets/js/7.ba91288f.js"><link rel="prefetch" href="/matheusblog/assets/js/70.884a3941.js"><link rel="prefetch" href="/matheusblog/assets/js/71.e6a4e7e9.js"><link rel="prefetch" href="/matheusblog/assets/js/72.0c79c022.js"><link rel="prefetch" href="/matheusblog/assets/js/73.74d15721.js"><link rel="prefetch" href="/matheusblog/assets/js/74.2e1a049a.js"><link rel="prefetch" href="/matheusblog/assets/js/75.4b3d1c23.js"><link rel="prefetch" href="/matheusblog/assets/js/76.795cf399.js"><link rel="prefetch" href="/matheusblog/assets/js/77.6c3ba4d1.js"><link rel="prefetch" href="/matheusblog/assets/js/78.f6d065af.js"><link rel="prefetch" href="/matheusblog/assets/js/79.bbc92764.js"><link rel="prefetch" href="/matheusblog/assets/js/8.2bbad353.js"><link rel="prefetch" href="/matheusblog/assets/js/80.e37a9364.js"><link rel="prefetch" href="/matheusblog/assets/js/81.b45e07a4.js"><link rel="prefetch" href="/matheusblog/assets/js/82.94813e82.js"><link rel="prefetch" href="/matheusblog/assets/js/83.440b03a0.js"><link rel="prefetch" href="/matheusblog/assets/js/84.d25fb0a1.js"><link rel="prefetch" href="/matheusblog/assets/js/85.583306ae.js"><link rel="prefetch" href="/matheusblog/assets/js/86.250e6726.js"><link rel="prefetch" href="/matheusblog/assets/js/87.e4ec29a6.js"><link rel="prefetch" href="/matheusblog/assets/js/88.eaba037f.js"><link rel="prefetch" href="/matheusblog/assets/js/89.10c11e14.js"><link rel="prefetch" href="/matheusblog/assets/js/9.8778260b.js"><link rel="prefetch" href="/matheusblog/assets/js/90.df4bee53.js"><link rel="prefetch" href="/matheusblog/assets/js/91.735a999e.js"><link rel="prefetch" href="/matheusblog/assets/js/92.3aa58421.js"><link rel="prefetch" href="/matheusblog/assets/js/93.dd17fb55.js"><link rel="prefetch" href="/matheusblog/assets/js/94.d5036e19.js"><link rel="prefetch" href="/matheusblog/assets/js/95.309bb35b.js"><link rel="prefetch" href="/matheusblog/assets/js/96.5eac219b.js"><link rel="prefetch" href="/matheusblog/assets/js/97.3eedba1b.js"><link rel="prefetch" href="/matheusblog/assets/js/98.a74847e6.js"><link rel="prefetch" href="/matheusblog/assets/js/99.11b1b877.js">
    <link rel="stylesheet" href="/matheusblog/assets/css/0.styles.980a01be.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/matheusblog/" class="home-link router-link-active"><!----> <span class="site-name">MyBlog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          集合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/collection/泛型和集合.html" class="nav-link">
  泛型和集合
</a></li></ul></li><li class="dropdown-item"><h4>
          IO
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/io/IO.html" class="nav-link">
  IO
</a></li></ul></li><li class="dropdown-item"><h4>
          并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/thread/多线程.html" class="nav-link">
  多线程
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/jvm/00虚拟机内存体系与垃圾回收.html" class="nav-link">
  JVM简介
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Menu" class="dropdown-title"><span class="title">Web基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web Menu" class="mobile-dropdown-title"><span class="title">Web基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/html5/01HTML概述.html" class="nav-link">
  HTML概述
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/css/01基础选择器+字体文本样式.html" class="nav-link">
  基础选择器+字体文本样式
</a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/js/01JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li></ul></li><li class="dropdown-item"><h4>
          VUE
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/vue/02模板语法.html" class="nav-link">
  Vue简介与安装使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="database Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="database Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mysql/01数据库软件的安装与使用.html" class="nav-link">
  数据库软件的安装与使用
</a></li></ul></li><li class="dropdown-item"><h4>
          MongoDB
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mongodb/01数据库和集合基本操作.html" class="nav-link">
  数据库和集合基本操作
</a></li></ul></li><li class="dropdown-item"><h4>
          ElasticSearch
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/elasticsearch/02Elasticsearch-Docker搭建ES.html" class="nav-link">
  Docker搭建ES
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringFramework Menu" class="dropdown-title"><span class="title">SpringFramework</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringFramework Menu" class="mobile-dropdown-title"><span class="title">SpringFramework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Maven
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/spring/Spring概述.html" class="nav-link">
  Spring概述
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springmvc/springMVC框架.html" class="nav-link">
  SpringMVC框架
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis-plus
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="nav-link">
  MyBatis简介
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springboot/SpringBoot简介.html" class="nav-link">
  SpringBoot简介
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Devops Menu" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="Devops Menu" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/linux/00 Centos.html" class="nav-link">
  CentOS
</a></li></ul></li><li class="dropdown-item"><h4>
          tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/tools/VS Code使用.html" class="nav-link">
  VS Code使用
</a></li></ul></li><li class="dropdown-item"><h4>
          k8s
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/k8s/01Kubernetes介绍及使用.html" class="nav-link">
  K8s介绍与使用
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/springcloud/note.html" class="nav-link">
  SpringCloud
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="develop Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="develop Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          代码质量
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/code-style/effective-java/目录.html" class="nav-link">
  Effective-Java
</a></li><li class="dropdown-subitem"><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="nav-link">
  单元测试
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/arch/计算机软件架构发展历史.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other-languages Menu" class="dropdown-title"><span class="title">其他语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="other-languages Menu" class="mobile-dropdown-title"><span class="title">其他语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/go/01Go语言介绍.html" class="nav-link">
  Go语言介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          Scala
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/scala/Scala学习宝典.html" class="nav-link">
  Scala学习宝典
</a></li></ul></li><li class="dropdown-item"><h4>
          Python
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/python/Python基础学习.html" class="nav-link">
  Python基础学习
</a></li></ul></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java Menu" class="dropdown-title"><span class="title">Java</span> <span class="arrow down"></span></button> <button type="button" aria-label="Java Menu" class="mobile-dropdown-title"><span class="title">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          基础
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/basic/helloworld.html" class="nav-link">
  认识编程
</a></li></ul></li><li class="dropdown-item"><h4>
          集合
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/collection/泛型和集合.html" class="nav-link">
  泛型和集合
</a></li></ul></li><li class="dropdown-item"><h4>
          IO
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/io/IO.html" class="nav-link">
  IO
</a></li></ul></li><li class="dropdown-item"><h4>
          并发编程
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/thread/多线程.html" class="nav-link">
  多线程
</a></li></ul></li><li class="dropdown-item"><h4>
          JVM
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/java/jvm/00虚拟机内存体系与垃圾回收.html" class="nav-link">
  JVM简介
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Web Menu" class="dropdown-title"><span class="title">Web基础</span> <span class="arrow down"></span></button> <button type="button" aria-label="Web Menu" class="mobile-dropdown-title"><span class="title">Web基础</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          HTML5
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/html5/01HTML概述.html" class="nav-link">
  HTML概述
</a></li></ul></li><li class="dropdown-item"><h4>
          CSS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/css/01基础选择器+字体文本样式.html" class="nav-link">
  基础选择器+字体文本样式
</a></li></ul></li><li class="dropdown-item"><h4>
          JS
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/js/01JavaScript基础.html" class="nav-link">
  JavaScript基础
</a></li></ul></li><li class="dropdown-item"><h4>
          VUE
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/web/vue/02模板语法.html" class="nav-link">
  Vue简介与安装使用
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="database Menu" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="database Menu" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          MySQL
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mysql/01数据库软件的安装与使用.html" class="nav-link">
  数据库软件的安装与使用
</a></li></ul></li><li class="dropdown-item"><h4>
          MongoDB
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/mongodb/01数据库和集合基本操作.html" class="nav-link">
  数据库和集合基本操作
</a></li></ul></li><li class="dropdown-item"><h4>
          ElasticSearch
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/db/elasticsearch/02Elasticsearch-Docker搭建ES.html" class="nav-link">
  Docker搭建ES
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="SpringFramework Menu" class="dropdown-title"><span class="title">SpringFramework</span> <span class="arrow down"></span></button> <button type="button" aria-label="SpringFramework Menu" class="mobile-dropdown-title"><span class="title">SpringFramework</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Maven
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="nav-link">
  Maven入门基础
</a></li></ul></li><li class="dropdown-item"><h4>
          Spring
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/spring/Spring概述.html" class="nav-link">
  Spring概述
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringMVC
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springmvc/springMVC框架.html" class="nav-link">
  SpringMVC框架
</a></li></ul></li><li class="dropdown-item"><h4>
          MyBatis-plus
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="nav-link">
  MyBatis简介
</a></li></ul></li><li class="dropdown-item"><h4>
          SpringBoot
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/spring/springboot/SpringBoot简介.html" class="nav-link">
  SpringBoot简介
</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Devops Menu" class="dropdown-title"><span class="title">DevOps</span> <span class="arrow down"></span></button> <button type="button" aria-label="Devops Menu" class="mobile-dropdown-title"><span class="title">DevOps</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          linux
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/linux/00 Centos.html" class="nav-link">
  CentOS
</a></li></ul></li><li class="dropdown-item"><h4>
          tools
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/tools/VS Code使用.html" class="nav-link">
  VS Code使用
</a></li></ul></li><li class="dropdown-item"><h4>
          k8s
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/devops/k8s/01Kubernetes介绍及使用.html" class="nav-link">
  K8s介绍与使用
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/springcloud/note.html" class="nav-link">
  SpringCloud
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="develop Menu" class="dropdown-title"><span class="title">开发</span> <span class="arrow down"></span></button> <button type="button" aria-label="develop Menu" class="mobile-dropdown-title"><span class="title">开发</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          代码质量
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/develop/code-style/effective-java/目录.html" class="nav-link">
  Effective-Java
</a></li><li class="dropdown-subitem"><a href="/matheusblog/md/develop/JUnit/01什么是单元测试.html" class="nav-link">
  单元测试
</a></li></ul></li></ul></div></div><div class="nav-item"><a href="/matheusblog/md/arch/计算机软件架构发展历史.html" class="nav-link">
  架构
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="other-languages Menu" class="dropdown-title"><span class="title">其他语言</span> <span class="arrow down"></span></button> <button type="button" aria-label="other-languages Menu" class="mobile-dropdown-title"><span class="title">其他语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Go
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/go/01Go语言介绍.html" class="nav-link">
  Go语言介绍
</a></li></ul></li><li class="dropdown-item"><h4>
          Scala
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/scala/Scala学习宝典.html" class="nav-link">
  Scala学习宝典
</a></li></ul></li><li class="dropdown-item"><h4>
          Python
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/matheusblog/md/other-languages/python/Python基础学习.html" class="nav-link">
  Python基础学习
</a></li></ul></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Maven</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/spring/maven/01Tomcat入门基础.html" class="sidebar-link">Tomcat入门基础</a></li><li><a href="/matheusblog/md/spring/maven/02Maven入门基础.html" class="sidebar-link">Maven入门基础</a></li><li><a href="/matheusblog/md/spring/maven/03Maven pom.xml常用配置.html" class="sidebar-link">Maven的pom.xml常用配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Spring</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/spring/spring/Spring概述.html" class="sidebar-link">Spring概述</a></li><li><a href="/matheusblog/md/spring/spring/Spring入门案例.html" class="sidebar-link">Spring入门案例</a></li><li><a href="/matheusblog/md/spring/spring/IoC控制反转.html" class="sidebar-link">IOC控制反转</a></li><li><a href="/matheusblog/md/spring/spring/DI依赖注入.html" class="sidebar-link">DI依赖注入</a></li><li><a href="/matheusblog/md/spring/spring/Bean工厂.html" class="sidebar-link">Bean工厂</a></li><li><a href="/matheusblog/md/spring/spring/AOP面向切面编程.html" class="sidebar-link">AOP面向切面编程</a></li><li><a href="/matheusblog/md/spring/spring/事务控制.html" class="active sidebar-link">事务控制</a></li><li><a href="/matheusblog/md/spring/spring/注解大全.html" class="sidebar-link">注解大全</a></li><li><a href="/matheusblog/md/spring/spring/Spring设计模式.html" class="sidebar-link">Spring设计模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>SpringMVC</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/spring/springmvc/SpringMVC简介.html" class="sidebar-link">Spring MVC 简介</a></li><li><a href="/matheusblog/md/spring/springmvc/SpringMVC入门案例与高级用法.html" class="sidebar-link">SpringMVC入门案例与高级应用</a></li><li><a href="/matheusblog/md/spring/springmvc/SpringMVC框架.html" class="sidebar-link">SpringMVC框架</a></li><li><a href="/matheusblog/md/spring/springmvc/前后端交互与Spring MVC参数传递.html" class="sidebar-link">前后端交互与SpringMVC参数传递</a></li><li><a href="/matheusblog/md/spring/springmvc/SpringMVC会话管理.html" class="sidebar-link">SpringMVC会话管理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>MyBatis-Plus</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/spring/mybatis/01MyBatis简介.html" class="sidebar-link">MyBatis简介</a></li><li><a href="/matheusblog/md/spring/mybatis/02入门程序.html" class="sidebar-link">MyBatis入门程序</a></li><li><a href="/matheusblog/md/spring/mybatis/03MyBatis框架.html" class="sidebar-link">MyBatis框架</a></li><li><a href="/matheusblog/md/spring/mybatis/04MyBatis-Plus.html" class="sidebar-link">MyBatis-Plus</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>SpringBoot</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/matheusblog/md/spring/springboot/SpringBoot简介.html" class="sidebar-link">SpringBoot简介</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="事务控制"><a href="#事务控制" class="header-anchor">#</a> 事务控制</h1> <p></p><div class="table-of-contents"><ul><li><a href="#事务的基本原理">事务的基本原理</a></li><li><a href="#与事务相关的理论知识">与事务相关的理论知识</a></li><li><a href="#spring事务管理">Spring事务管理</a><ul><li><a href="#配置事务管理器">配置事务管理器</a></li><li><a href="#编程式事务管理">编程式事务管理</a></li><li><a href="#声明式事务管理">声明式事务管理</a></li></ul></li></ul></div><p></p> <h2 id="事务的基本原理"><a href="#事务的基本原理" class="header-anchor">#</a> 事务的基本原理</h2> <p>Spring事务的本质其实就是数据库对事务的支持，使用JDBC的事务管理机制,就是利用java.sql.Connection对象完成对事务的提交，那在没有Spring帮我们管理事务之前，我们要怎么做。</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token class-name">Connection</span> conn <span class="token operator">=</span> <span class="token class-name">DriverManager</span><span class="token punctuation">.</span><span class="token function">getConnection</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">try</span> <span class="token punctuation">{</span>  
    conn<span class="token punctuation">.</span><span class="token function">setAutoCommit</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//将自动提交设置为false                         </span>
    执行CRUD操作 
    conn<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">//当两个操作成功后手动提交  </span>
<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span> <span class="token punctuation">{</span>  
    conn<span class="token punctuation">.</span><span class="token function">rollback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">//一旦其中一个操作出错都将回滚，所有操作都不成功</span>
    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  
<span class="token punctuation">}</span> <span class="token keyword">finally</span> <span class="token punctuation">{</span>
    conn<span class="token punctuation">.</span><span class="token function">colse</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>事务是一系列的动作，一旦其中有一个动作出现错误，必须全部回滚，系统将事务中对数据库的所有已完成的操作全部撤消，滚回到事务开始的状态，避免出现由于数据不一致而导致的接下来一系列的错误。事务的出现是为了确保数据的完整性和一致性，在目前企业级应用开发中，事务管理是必不可少的。</p> <p>事务: 是一种能够保证统一个业务中多个写(增删改)操作要么全部成果,要么全部失败的机制!</p> <p>在业务方法上添加<code>@Transactional</code>即可保证此方法是业务性(要么全部失败, 要么全部成功).</p> <p>在Spring JDBC中, 处理事务的机制大致是</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>开启事务:  Begin
try{
    你的业务方法
    提交: Commit
} catch(RuntimeEXception e){
    回滚: Rollback
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>所以，为了保证事务性，所有的写操作在执行之后，必须有某个判定为失败的标准，且判断定为失败后，必须抛出<code>RuntimeException</code>或其子孙类异常！</p> <ul><li>Spring JDBC默认对<code>RuntimeException</code>进行回滚处理，有必要的话，也可以配置为其它异常类型</li></ul> <p>当需要方法是事务性的，可以使用<code>@Transactional</code>注解，此注解可以添加在：</p> <ul><li>接口
<ul><li>会使得此接口的实现类的所有实现方法都是事务性的</li></ul></li> <li>接口中的抽象方法上
<ul><li>会使得此接口的实现类中，重写的此方法是事务性的</li> <li>只作用于当前方法</li> <li>如果接口上也配置了此注解，并且接口和抽象方法的注解均配置了参数，以方法上的配置为准</li></ul></li> <li>业务实现类
<ul><li>会使得当前类中所有重写的方法都是事务性
<ul><li>自定义的方法不会是事务性的</li></ul></li></ul></li> <li>业务实现类中的方法
<ul><li>不可以添加在自定义的（不是重写的接口的）方法上
<ul><li>语法上，可以添加，但执行时，不允许</li></ul></li></ul></li></ul> <p>Spring JDBC是通过接口代理的方式进行事务管理，所以，只对接口中声明的方法有效！</p> <p>通常，应该将<code>@Transactional</code>添加在接口中的抽象方法上（如果偷懒，或为了避免遗漏，也可以直接添加在接口上）。</p> <h2 id="与事务相关的理论知识"><a href="#与事务相关的理论知识" class="header-anchor">#</a> 与事务相关的理论知识</h2> <p>众所周知，事务有四大特性（ACID）</p> <p>1.原子性（Atomicity）事务是一个原子操作，由一系列动作组成。事务的原子性确保动作要么全部完成，要么完全不起作用。</p> <p>2.一致性（Consistency）事务在完成时，必须是所有的数据都保持一致状态。</p> <p>3.隔离性（Isolation）并发事务执行之间无影响，在一个事务内部的操作对其他事务是不产生影响，这需要事务隔离级别来指定隔离性。</p> <p>4.持久性（Durability）一旦事务完成，数据库的改变必须是持久化的。</p> <p>在企业级应用中，多用户访问数据库是常见的场景，这就是所谓的事务的并发。事务并发所可能存在的问题：
1.脏读：一个事务读到另一个事务未提交的更新数据。
2.不可重复读：一个事务两次读同一行数据，可是这两次读到的数据不一样。
3.幻读：一个事务执行两次查询，但第二次查询比第一次查询多出了一些数据行。
4.丢失更新：撤消一个事务时，把其它事务已提交的更新的数据覆盖了。</p> <p>我们可以在java.sql.Connection中看到JDBC定义了五种事务隔离级别来解决这些并发导致的问题：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token comment">/**
 * A constant indicating that transactions are not supported. 
 */</span>
<span class="token keyword">int</span> TRANSACTION_NONE         <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * A constant indicating that
 * dirty reads, non-repeatable reads and phantom reads can occur.
 * This level allows a row changed by one transaction to be read
 * by another transaction before any changes in that row have been
 * committed (a &quot;dirty read&quot;).  If any of the changes are rolled back, 
 * the second transaction will have retrieved an invalid row.
 */</span>
<span class="token keyword">int</span> TRANSACTION_READ_UNCOMMITTED <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * A constant indicating that
 * dirty reads are prevented; non-repeatable reads and phantom
 * reads can occur.  This level only prohibits a transaction
 * from reading a row with uncommitted changes in it.
 */</span>
<span class="token keyword">int</span> TRANSACTION_READ_COMMITTED   <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * A constant indicating that
 * dirty reads and non-repeatable reads are prevented; phantom
 * reads can occur.  This level prohibits a transaction from
 * reading a row with uncommitted changes in it, and it also
 * prohibits the situation where one transaction reads a row,
 * a second transaction alters the row, and the first transaction
 * rereads the row, getting different values the second time
 * (a &quot;non-repeatable read&quot;).
 */</span>
<span class="token keyword">int</span> TRANSACTION_REPEATABLE_READ  <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * A constant indicating that
 * dirty reads, non-repeatable reads and phantom reads are prevented.
 * This level includes the prohibitions in
 * &lt;code&gt;TRANSACTION_REPEATABLE_READ&lt;/code&gt; and further prohibits the 
 * situation where one transaction reads all rows that satisfy
 * a &lt;code&gt;WHERE&lt;/code&gt; condition, a second transaction inserts a row that
 * satisfies that &lt;code&gt;WHERE&lt;/code&gt; condition, and the first transaction
 * rereads for the same condition, retrieving the additional
 * &quot;phantom&quot; row in the second read.
 */</span>
<span class="token keyword">int</span> TRANSACTION_SERIALIZABLE     <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span><span class="token number">1234567891011121314151617181920212223242526272829303132333435363738394041424344454647</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br></div></div><p>翻译过来这几个常量就是
TRANSACTION_NONE JDBC 驱动不支持事务
TRANSACTION_READ_UNCOMMITTED 允许脏读、不可重复读和幻读。
TRANSACTION_READ_COMMITTED 禁止脏读，但允许不可重复读和幻读。
TRANSACTION_REPEATABLE_READ 禁止脏读和不可重复读，单运行幻读。
TRANSACTION_SERIALIZABLE 禁止脏读、不可重复读和幻读。</p> <p>隔离级别越高，意味着数据库事务并发执行性能越差，能处理的操作就越少。你可以通过conn.setTransactionLevel去设置你需要的隔离级别。
JDBC规范虽然定义了事务的以上支持行为，但是各个JDBC驱动，数据库厂商对事务的支持程度可能各不相同。
出于性能的考虑我们一般设置TRANSACTION_READ_COMMITTED就差不多了，剩下的通过使用数据库的锁来帮我们处理别的，关于数据库的锁这个之后再说。</p> <p>了解了基本的JDBC事务，那有了Spring，在事务管理上会有什么新的改变呢？
有了Spring，我们再也无需要去处理获得连接、关闭连接、事务提交和回滚等这些操作，使得我们把更多的精力放在处理业务上。事实上Spring并不直接管理事务，而是提供了多种事务管理器。他们将事务管理的职责委托给Hibernate或者JTA等持久化机制所提供的相关平台框架的事务来实现。</p> <h2 id="spring事务管理"><a href="#spring事务管理" class="header-anchor">#</a> Spring事务管理</h2> <p>Spring事务管理的核心接口是PlatformTransactionManager</p> <p><img src="data:image/png;base64,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" alt="这里写图片描述"></p> <p>事务管理器接口通过getTransaction(TransactionDefinition definition)方法根据指定的传播行为返回当前活动的事务或创建一个新的事务，这个方法里面的参数是TransactionDefinition类，这个类就定义了一些基本的事务属性。
在TransactionDefinition接口中定义了它自己的传播行为和隔离级别</p> <p><img src="/matheusblog/assets/img/SouthEast-16540632628281.afdb76f3.png" alt="这里写图片描述"></p> <p>除去常量，主要的方法有：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">int</span> <span class="token function">getIsolationLevel</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回事务的隔离级别</span>
<span class="token class-name">String</span> <span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回事务的名称</span>
<span class="token keyword">int</span> <span class="token function">getPropagationBehavior</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 返回事务的传播行为</span>
<span class="token keyword">int</span> <span class="token function">getTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 返回事务必须在多少秒内完成</span>
<span class="token keyword">boolean</span> <span class="token function">isReadOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 事务是否只读，事务管理器能够根据这个返回值进行优化，确保事务是只读的12345</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h4 id="spring事务的传播属性"><a href="#spring事务的传播属性" class="header-anchor">#</a> Spring事务的传播属性</h4> <p>由上图可知，Spring定义了7个以PROPAGATION_开头的常量表示它的传播属性。</p> <table><thead><tr><th>名称</th> <th>值</th> <th>解释</th></tr></thead> <tbody><tr><td>PROPAGATION_REQUIRED</td> <td>0</td> <td>支持当前事务，如果当前没有事务，就新建一个事务。这是最常见的选择，也是Spring默认的事务的传播。</td></tr> <tr><td>PROPAGATION_SUPPORTS</td> <td>1</td> <td>支持当前事务，如果当前没有事务，就以非事务方式执行。</td></tr> <tr><td>PROPAGATION_MANDATORY</td> <td>2</td> <td>支持当前事务，如果当前没有事务，就抛出异常。</td></tr> <tr><td>PROPAGATION_REQUIRES_NEW</td> <td>3</td> <td>新建事务，如果当前存在事务，把当前事务挂起。</td></tr> <tr><td>PROPAGATION_NOT_SUPPORTED</td> <td>4</td> <td>以非事务方式执行操作，如果当前存在事务，就把当前事务挂起。</td></tr> <tr><td>PROPAGATION_NEVER</td> <td>5</td> <td>以非事务方式执行，如果当前存在事务，则抛出异常。</td></tr> <tr><td>PROPAGATION_NESTED</td> <td>6</td> <td>如果当前存在事务，则在嵌套事务内执行。如果当前没有事务，则进行与PROPAGATION_REQUIRED类似的操作。</td></tr></tbody></table> <h4 id="spring事务的隔离级别"><a href="#spring事务的隔离级别" class="header-anchor">#</a> Spring事务的隔离级别</h4> <table><thead><tr><th>名称</th> <th>值</th> <th>解释</th></tr></thead> <tbody><tr><td>ISOLATION_DEFAULT</td> <td>-1</td> <td>这是一个PlatfromTransactionManager默认的隔离级别，使用数据库默认的事务隔离级别。另外四个与JDBC的隔离级别相对应</td></tr> <tr><td>ISOLATION_READ_UNCOMMITTED</td> <td>1</td> <td>这是事务最低的隔离级别，它充许另外一个事务可以看到这个事务未提交的数据。这种隔离级别会产生脏读，不可重复读和幻读。</td></tr> <tr><td>ISOLATION_READ_COMMITTED</td> <td>2</td> <td>保证一个事务修改的数据提交后才能被另外一个事务读取。另外一个事务不能读取该事务未提交的数据。</td></tr> <tr><td>ISOLATION_REPEATABLE_READ</td> <td>4</td> <td>这种事务隔离级别可以防止脏读，不可重复读。但是可能出现幻读。</td></tr> <tr><td>ISOLATION_SERIALIZABLE</td> <td>8</td> <td>这是花费最高代价但是最可靠的事务隔离级别。事务被处理为顺序执行。除了防止脏读，不可重复读外，还避免了幻读。</td></tr></tbody></table> <p>调用PlatformTransactionManager接口的getTransaction()的方法得到的是TransactionStatus接口的一个实现
TransactionStatus接口</p> <p><img src="data:image/png;base64,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" alt="这里写图片描述"></p> <p>主要的方法有：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">void</span> <span class="token function">flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//如果适用的话，这个方法用于刷新底层会话中的修改到数据库，例如，所有受影响的Hibernate/JPA会话。</span>
<span class="token keyword">boolean</span> <span class="token function">hasSavepoint</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否有恢复点</span>
<span class="token keyword">boolean</span> <span class="token function">isCompleted</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 是否已完成</span>
<span class="token keyword">boolean</span> <span class="token function">isNewTransaction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否是新的事务</span>
<span class="token keyword">boolean</span> <span class="token function">isRollbackOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 是否为只回滚</span>
<span class="token keyword">void</span> <span class="token function">setRollbackOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 设置为只回滚123456</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>可以看出返回的结果是一些事务的状态，可用来检索事务的状态信息。</p> <h3 id="配置事务管理器"><a href="#配置事务管理器" class="header-anchor">#</a> 配置事务管理器</h3> <p>介绍完Spring事务的管理的流程大概是怎么走的。接下来可以动手试试Spring是如何配置事务管理器的
例如我在spring-mybatis中配置的:</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token comment">&lt;!-- 配置事务管理器 --&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.jdbc.datasource.DataSourceTransactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>dataSource<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>1234
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这配置不是唯一的，可以根据自己项目选择的数据访问框架灵活配置事务管理器</p> <p>配置了事务管理器后，事务当然还是得我们自己去操作，Spring提供了两种事务管理的方式：编程式事务管理和声明式事务管理，让我们分别看看它们是怎么做的吧。</p> <h3 id="编程式事务管理"><a href="#编程式事务管理" class="header-anchor">#</a> 编程式事务管理</h3> <p>编程式事务管理我们可以通过PlatformTransactionManager实现来进行事务管理，同样的Spring也为我们提供了模板类TransactionTemplate进行事务管理，下面主要介绍模板类，我们需要在配置文件中配置</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token comment">&lt;!--配置事务管理的模板--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>bean</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionTemplate<span class="token punctuation">&quot;</span></span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>org.springframework.transaction.support.TransactionTemplate<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span> <span class="token attr-name">ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token comment">&lt;!--定义事务隔离级别,-1表示使用数据库默认级别--&gt;</span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>isolationLevelName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>ISOLATION_DEFAULT<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>propagationBehaviorName<span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>PROPAGATION_REQUIRED<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>bean</span><span class="token punctuation">&gt;</span></span>1234567
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>TransactionTemplate帮我们封装了许多代码，节省了我们的工作。下面我们写个单元测试来测测。
为了测试事务回滚，专门建了一张tbl_accont表，用于模拟存钱的一个场景。service层主要代码如下
BaseSeviceImpl</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token comment">//方便测试直接写的sql</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        dao<span class="token punctuation">.</span><span class="token function">insertSql</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果flag 为 true ，抛出异常</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;has exception!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//获取总金额</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token class-name">Integer</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> dao<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>dao对应的sum方法</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>select</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>sum<span class="token punctuation">&quot;</span></span> <span class="token attr-name">resultType</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>java.lang.Integer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        SELECT SUM(money) FROM tbl_account;
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>select</span><span class="token punctuation">&gt;</span></span>123
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>下面看看测试代码</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code><span class="token keyword">package</span> <span class="token namespace">com<span class="token punctuation">.</span>gray</span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">com<span class="token punctuation">.</span>gray<span class="token punctuation">.</span>service<span class="token punctuation">.</span></span><span class="token class-name">BaseSevice</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span></span><span class="token class-name">Test</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>junit<span class="token punctuation">.</span>runner<span class="token punctuation">.</span></span><span class="token class-name">RunWith</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>beans<span class="token punctuation">.</span>factory<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Autowired</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span></span><span class="token class-name">ContextConfiguration</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>test<span class="token punctuation">.</span>context<span class="token punctuation">.</span>junit4<span class="token punctuation">.</span></span><span class="token class-name">SpringJUnit4ClassRunner</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span></span><span class="token class-name">TransactionStatus</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">TransactionCallbackWithoutResult</span></span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token import"><span class="token namespace">org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>transaction<span class="token punctuation">.</span>support<span class="token punctuation">.</span></span><span class="token class-name">TransactionTemplate</span></span><span class="token punctuation">;</span>

<span class="token keyword">import</span> <span class="token import"><span class="token namespace">javax<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span></span><span class="token class-name">Resource</span></span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Created by gray on 2017/4/8.
 */</span>
<span class="token annotation punctuation">@RunWith</span><span class="token punctuation">(</span><span class="token class-name">SpringJUnit4ClassRunner</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
<span class="token annotation punctuation">@ContextConfiguration</span><span class="token punctuation">(</span>locations <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;classpath:spring-test.xml&quot;</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TransactionTest</span><span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Resource</span>
    <span class="token keyword">private</span> <span class="token class-name">TransactionTemplate</span> transactionTemplate<span class="token punctuation">;</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">BaseSevice</span> baseSevice<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before transaction&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> sum1 <span class="token operator">=</span> baseSevice<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before transaction sum: &quot;</span><span class="token operator">+</span>sum1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;transaction....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        transactionTemplate<span class="token punctuation">.</span><span class="token function">execute</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">TransactionCallbackWithoutResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token annotation punctuation">@Override</span>
            <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">doInTransactionWithoutResult</span><span class="token punctuation">(</span><span class="token class-name">TransactionStatus</span> status<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">try</span><span class="token punctuation">{</span>
                    baseSevice<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO tbl_account VALUES (100);&quot;</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    baseSevice<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO tbl_account VALUES (100);&quot;</span><span class="token punctuation">,</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//对于抛出Exception类型的异常且需要回滚时,需要捕获异常并通过调用status对象的setRollbackOnly()方法告知事务管理器当前事务需要回滚</span>
                    status<span class="token punctuation">.</span><span class="token function">setRollbackOnly</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
           <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after transaction&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> sum2 <span class="token operator">=</span> baseSevice<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after transaction sum: &quot;</span><span class="token operator">+</span>sum2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>当baseSevice.insert的第二个参数为false时，我们假设插入数据没有出现任何问题，测试结果如图所示：</p> <p><img src="/matheusblog/assets/img/SouthEast-16540632628293.756acf9f.jpeg" alt="这里写图片描述"></p> <p>当第二个参数为true时，insert会抛出一个异常，这是事务就应该回滚，数据前后不应该有变化，如图所示：</p> <p><img src="/matheusblog/assets/img/SouthEast-16540632628294.ea12e8f3.jpeg" alt="这里写图片描述"></p> <h3 id="声明式事务管理"><a href="#声明式事务管理" class="header-anchor">#</a> 声明式事务管理</h3> <p>声明式事务管理有两种常用的方式，一种是基于tx和aop命名空间的xml配置文件，一种是基于@Transactional注解，随着Spring和Java的版本越来越高，大家越趋向于使用注解的方式，下面我们两个都说。
<strong>1.基于tx和aop命名空间的xml配置文件</strong>
配置文件</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>advice</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>advice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>method</span> <span class="token attr-name">name</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>insert<span class="token punctuation">&quot;</span></span> <span class="token attr-name">propagation</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>REQUIRED<span class="token punctuation">&quot;</span></span> <span class="token attr-name">read-only</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>false<span class="token punctuation">&quot;</span></span>  <span class="token attr-name">rollback-for</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>Exception<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>attributes</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">tx:</span>advice</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>pointcut</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointCut<span class="token punctuation">&quot;</span></span> <span class="token attr-name">expression</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>execution (* com.gray.service.*.*(..))<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">aop:</span>advisor</span> <span class="token attr-name">advice-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>advice<span class="token punctuation">&quot;</span></span> <span class="token attr-name">pointcut-ref</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>pointCut<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span><span class="token namespace">aop:</span>config</span><span class="token punctuation">&gt;</span></span>12345678910
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>测试代码</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Test</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">transTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before transaction&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> sum1 <span class="token operator">=</span> baseSevice<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;before transaction sum: &quot;</span><span class="token operator">+</span>sum1<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;transaction....&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">try</span><span class="token punctuation">{</span>
            baseSevice<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span><span class="token string">&quot;INSERT INTO tbl_account VALUES (100);&quot;</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span><span class="token class-name">Exception</span> e<span class="token punctuation">)</span><span class="token punctuation">{</span>
            e<span class="token punctuation">.</span><span class="token function">printStackTrace</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after transaction&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Integer</span> sum2 <span class="token operator">=</span> baseSevice<span class="token punctuation">.</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">System</span><span class="token punctuation">.</span>out<span class="token punctuation">.</span><span class="token function">println</span><span class="token punctuation">(</span><span class="token string">&quot;after transaction sum: &quot;</span><span class="token operator">+</span>sum2<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>事务正常执行结果截图</p> <p><img src="/matheusblog/assets/img/SouthEast-16540632628305.9d8ba025.jpeg" alt="这里写图片描述"></p> <p>事务出现异常结果截图</p> <p><img src="/matheusblog/assets/img/SouthEast-16540632628306.a4e78740.jpeg" alt="这里写图片描述"></p> <p><strong>2.基于@Transactional注解</strong>
这种方式最简单，也是最为常用的，只需要在配置文件中开启对注解事务管理的支持。</p> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code>    <span class="token comment">&lt;!-- 声明式事务管理 配置事物的注解方式注入--&gt;</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span><span class="token namespace">tx:</span>annotation-driven</span> <span class="token attr-name">transaction-manager</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>transactionManager<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>12
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>然后在需要事务管理的地方加上@Transactional注解，如：</p> <div class="language-java line-numbers-mode"><pre class="language-java"><code>    <span class="token annotation punctuation">@Transactional</span><span class="token punctuation">(</span>rollbackFor<span class="token operator">=</span><span class="token class-name">Exception</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">insert</span><span class="token punctuation">(</span><span class="token class-name">String</span> sql<span class="token punctuation">,</span> <span class="token keyword">boolean</span> flag<span class="token punctuation">)</span> <span class="token keyword">throws</span> <span class="token class-name">Exception</span> <span class="token punctuation">{</span>
        dao<span class="token punctuation">.</span><span class="token function">insertSql</span><span class="token punctuation">(</span>sql<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 如果flag 为 true ，抛出异常</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>flag<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">&quot;has exception!!!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>rollbackFor属性指定出现Exception异常的时候回滚，遇到检查性的异常需要回滚，默认情况下非检查性异常，包括error也会自动回滚。
测试代码和上面那个一样
事务正常执行结果截图</p> <p><img src="/matheusblog/assets/img/SouthEast-16540632628317.dd450fe7.jpeg" alt="这里写图片描述"></p> <p>事务出现异常结果截图</p> <p><img src="/matheusblog/assets/img/SouthEast-16540632628318.aa4ed9e3.jpeg" alt="这里写图片描述"></p> <p>以上就是对Spring事务进行了详细的分析和代码示例。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/matheusblog/md/spring/spring/AOP面向切面编程.html" class="prev">
        AOP面向切面编程
      </a></span> <span class="next"><a href="/matheusblog/md/spring/spring/注解大全.html">
        注解大全
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/matheusblog/assets/js/app.395f5a95.js" defer></script><script src="/matheusblog/assets/js/3.f2f9a77d.js" defer></script><script src="/matheusblog/assets/js/42.04e054a9.js" defer></script>
  </body>
</html>
