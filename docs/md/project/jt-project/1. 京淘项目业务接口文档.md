# jt项目业务接口文档
[[TOC]]

## 1.用户登陆

### 1.1 用户登录验证接口

- 请求路径: /user/login
- 请求方式: POST
- 请求参数

| 参数名称 | 参数说明 | 备注     |
| -------- | -------- | -------- |
| username | 用户名   | 不能为空 |
| password | 密码     | 不能为空 |

- 响应数据 SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 返回密钥token信息                       |

返回值格式如下:

```javascript
	{"status":200,"msg":"服务器调用成功!","data":"1e893a97634847b3a8b499b173bea620"}
	
```

## 2.页面布局

### 2.1 左侧菜单获取

- 请求路径 /rights/getRightsList
- 请求类型 GET
- 请求参数 无
- 响应数据 SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 返回权限List集合                        |

- 响应数据如图所示
  
  ![在这里插入图片描述](https://img-blog.csdnimg.cn/20210512213439727.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)

## 3.用户列表展现

- 请求路径: /user/list
- 请求类型: GET
- 请求参数: 后台使用PageResult对象接收
- 请求案例: http://localhost:8091/user/list?query=查询关键字&pageNum=1&pageSize=10

| 参数名称 | 参数说明       | 备注信息           |
| -------- | -------------- | ------------------ |
| query    | 用户查询的数据 | 可以为null         |
| pageNum  | 分页查询的页数 | 必须赋值不能为null |
| pageSize | 分页查询的条数 | 必须赋值不能为null |

- 响应参数: SysResult对象 需要携带分页对象 PageResult

| 参数名称 | 参数说明             | 备注信息                                |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 返回值PageResult对象                    |

- PageResult 对象介绍

| 参数名称 | 参数类型 | 参数说明       | 备注信息   |
| -------- | -------- | -------------- | ---------- |
| query    | String   | 用户查询的数据 | 可以为null |
| pageNum  | Integer  | 查询页数       | 不能为null |
| pageSize | Integer  | 查询条数       | 不能为null |
| total    | Long     | 查询总记录数   | 不能为null |
| rows     | Object   | 分页查询的结果 | 不能为null |

- 返回值效果

```json
{"status":200,
  "msg":"服务器调用成功!",
  "data":
	{"query":"",
	"pageNum":1,
	"pageSize":2,
	"total":4,
	"rows":[
		{"created":"2021-02-18T11:17:23.000+00:00",
		 "updated":"2021-03-26T06:47:20.000+00:00",
		 "id":1,
		 "username":"admin",
		 "password":"a66abb5684c45962d887564f08346e8d",
		 "phone":"13111112222",
		 "email":"1235678@qq.com",
		 "status":true,
		 "role":null
		 },
		{"created":"2021-02-18T11:17:23.000+00:00",
		"updated":"2021-03-13T08:50:30.000+00:00",
		"id":2,
		"username":"admin123",
		"password":"a66abb5684c45962d887564f08346e8d",
		"phone":"13111112223",
		"email":"1235678@qq.com",
		"status":false,
		"role":null
		}
		]
	}
}

```

## 4.用户状态修改

- 请求路径 /user/status/{id}/{status}
- 请求类型 PUT
- 请求参数: 用户ID/状态值数据

| 参数名称 | 参数类型 | 参数说明     | 备注信息   |
| -------- | -------- | ------------ | ---------- |
| id       | Integer  | 用户ID号     | 不能为null |
| status   | boolean  | 参数状态信息 | 不能为null |

- 返回值结果: SysResult对象

```json
{"status":200,"msg":"服务器调用成功!","data":null}

```

## 6. 用户新增

- 请求路径 /user/addUser
- 请求类型 POST
- 请求参数: 整个form表单数据封装为js对象进行参数传递

| 参数名称 | 参数类型 | 参数说明 | 备注信息   |
| -------- | -------- | -------- | ---------- |
| username | String   | 用户名   | 不能为null |
| password | String   | 密码     | 不能为null |
| phone    | String   | 电话号码 | 不能为null |
| email    | String   | 密码     | 不能为null |

- 返回值结果: SysResult对象

```json
{"status":200,"msg":"服务器调用成功!","data":null}

```

## 6. 用户修改

### 6.1 根据ID查询用户信息

- 请求路径: /user/{id}
- 请求类型: GET
- 返回值: SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 返回user对象                            |

- JSON格式如下:

```json
{
 "status":200,
 "msg":"服务器调用成功!",
 "data":{
	 "created":"2021-02-18T11:17:23.000+00:00",
	 "updated":"2021-05-17T11:33:46.000+00:00",
	 "id":1,
	 "username":"admin",
	 "password":"a66abb5684c45962d887564f08346e8d",
	 "phone":"13111112222",
	 "email":"1235678@qq.com",
	 "status":true,
	 "role":null
	 }
 }

```

### 6.2 根据用户ID更新数据

- 请求路径: /user/updateUser
- 请求类型: PUT
- 请求参数: User对象结构

| 参数名称 | 参数说明 | 备注       |
| -------- | -------- | ---------- |
| ID       | 用户ID号 | 不能为null |
| phone    | 手机信息 | 不能为null |
| email    | 邮箱地址 | 不能为null |

- 返回值: SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | null                                    |

- JSON格式如下:

```json
{
 "status":200,
 "msg":"服务器调用成功!",
 "data":{}
 }

```

### 6.3 根据ID删除用户

- 请求路径: /user/{id}
- 请求类型: delete
- 请求参数:

| 参数名称 | 参数说明 | 备注       |
| -------- | -------- | ---------- |
| ID       | 用户ID号 | 不能为null |

- 返回值: SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | null                                    |

## 7. 商品分类实现

### 7.1 查询3级商品分类信息

- 请求路径: /itemCat/findItemCatList/{level}
- 请求类型: get
- 请求参数: level

| 参数名称 | 参数说明 | 备注                                                   |
| -------- | -------- | ------------------------------------------------------ |
| level    | 查询级别 | 1查询一级分类 2查询1-2 级商品分类 3查询1-2-3级商品分类 |

- 业务说明: 查询3级分类菜单数据 要求三层结构嵌套
- 返回值: SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 3级商品分类信息                         |

### 7.2 修改商品分类状态

- 请求路径: /itemCat/status/{id}/{status}
- 请求类型: put
- 请求参数:

| 参数名称 | 参数说明     | 备注       |
| -------- | ------------ | ---------- |
| id       | 用户ID值     | 不能为null |
| status   | 商品状态信息 | 不能为null |

- 返回值: SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

### 7.3 商品分类新增

- 请求路径: /itemCat/saveItemCat
- 请求类型: post
- 请求参数: 表单数据

| 参数名称 | 参数说明     | 备注               |
| -------- | ------------ | ------------------ |
| name     | 商品分类名称 | 不能为null         |
| parentId | 分类父级ID   | 不能为null         |
| level    | 分类级别     | 1 2 3 商品分类级别 |

- 返回值: SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

### 7.4 商品分类修改

- 请求路径: /itemCat/updateItemCat
- 请求类型: put
- 请求参数: 表单数据 ItemCat对象
- 返回值: SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

### 7.5 商品分类删除

- 请求路径: /itemCat/deleteItemCat
- 请求类型: delete
- 业务描述: 当删除节点为父级时,应该删除自身和所有的子节点
- 请求参数:

| 参数名称 | 参数说明                    | 备注       |
| -------- | --------------------------- | ---------- |
| id       | 用户id号                    | 不能为null |
| level    | 商品分类级别 一级,二级,三级 |            |

- 返回值结果 SysResult对象

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

## 8 商品分类参数实现

### 8.1 获取商品分类参数列表

- 请求路径: /itemCatParam/findItemCatParamListByType?itemCatId=564&paramType=1
- 请求类型: get
- 业务描述: 根据商品分类和参数类型,查询信息
- 请求参数:

| 参数名称  | 参数说明           | 备注                                |
| --------- | ------------------ | ----------------------------------- |
| itemCatId | 商品分类ID号       | 不能为null                          |
| paramType | 商品分类参数的类型 | 不能为null 1 为动态类型 2为静态属性 |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 商品分类参数List集合                    |

```json
{"status":200,
  "msg":"服务器调用成功!",
  "data":
  	[
  	  {
  	  "created":"2021-04-13T15:45:01.000+00:00",
  	  "updated":"2021-04-19T03:00:09.000+00:00",
  	  "paramId":1,
  	  "paramName":"选择颜色",
  	  "itemCatId":560,
  	  "paramType":1,
  	  "paramVals":"亮黑色,釉白色,秘银色,夏日胡杨,秋日胡杨,白色,黑色"
  	  },
  	  {
  	  	"created":"2021-04-13T15:45:01.000+00:00",
  	  	"updated":"2021-04-13T15:45:01.000+00:00",
  	  	"paramId":2,
  	  	"paramName":"选择版式",
  	  	"itemCatId":560,
  	  	"paramType":1,
  	  	"paramVals":"8GB+128GB,8GB+256GB,8GB+512GB"
  	  	}
	  ]
  	}

```

### 8.2 商品分类参数新增

- 请求路径: /itemCatParam/addItemCatParam
- 请求类型: post
- 业务描述: 实现商品分类参数新增操作
- 请求参数: 使用itemCatParam对象接收

| 参数名称  | 参数说明         | 备注       |
| --------- | ---------------- | ---------- |
| itemCatId | 商品分类ID号     | 不能为null |
| paramName | 商品分类参数名称 | 不能为null |
| paramType | 商品分类参数类型 | 不能为null |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

### 8.3 商品分类参数更新

- 请求路径: /itemCatParam/updateItemCatParam
- 请求类型: put
- 请求参数: 使用itemCatParam对象接收

| 参数名称  | 参数说明         | 备注       |
| --------- | ---------------- | ---------- |
| paramId   | 商品分类参数ID号 | 不能为null |
| paramName | 商品分类参数名称 | 不能为null |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

### 8.4 商品分类参数删除

- 请求路径: /itemCatParam/deleteItemCatParamById?paramId=20
- 请求类型: delete
- 请求参数:

| 参数名称 | 参数说明         | 备注       |
| -------- | ---------------- | ---------- |
| paramId  | 商品分类参数ID号 | 不能为null |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

### 8.6 商品分类参数规格修改

- 请求路径: /itemCatParam/updateItemCatParam
- 请求类型: put
- 请求参数: 使用对象接收

| 参数名称  | 参数说明         | 备注                |
| --------- | ---------------- | ------------------- |
| paramId   | 商品分类参数ID号 | 不能为null          |
| paramVals | 商品分类规格信息 | 多个参数使用,号分割 |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

## 9 商品模块实现

### 9.1 商品列表展现

- 请求路径: /item/getItemList?query=&pageNum=1&pageSize=10
- 请求类型: get
- 请求参数: 使用pageResult对象接收

| 参数名称 | 参数说明       | 备注信息           |
| -------- | -------------- | ------------------ |
| query    | 用户查询的数据 | 可以为null         |
| pageNum  | 分页查询的页数 | 必须赋值不能为null |
| pageSize | 分页查询的条数 | 必须赋值不能为null |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 商品分页对象                            |

### 9.2 商品状态修改

- 请求路径: /item/updateItemStatus
- 请求类型: put
- 请求参数: 使用对象接收

| 参数名称 | 参数说明 | 备注       |
| -------- | -------- | ---------- |
| id       | 商品id   | 不能为null |
| status   | 状态信息 | 不能为null |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

### 9.3 商品数据删除

- 请求路径: /item/deleteItemById
- 请求类型: delete
- 请求参数:

| 参数名称 | 参数说明 | 备注       |
| -------- | -------- | ---------- |
| id       | 商品id   | 不能为null |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

## 10 文件上传业务接口

- 请求路径: http://localhost:8091/file/upload
- 请求类型: post
- 请求参数:

| 参数名称 | 参数说明           | 备注                     |
| -------- | ------------------ | ------------------------ |
| file     | 文件上传的参数名称 | file中携带的是二进制信息 |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 返回ImageVO对象                         |

- ImageVO对象说明

| 参数名称    | 参数类型 | 参数说明                    | 备注                                                  |
| ----------- | -------- | --------------------------- | ----------------------------------------------------- |
| virtualPath | String   | 图片实际路径 不包含磁盘信息 | 例如: 2021/11/11/a.jpg 不需要写磁盘地址               |
| urlPath     | String   | 图片url访问地址             | http://image.jt.com/2021/11/11/a.jpg 需要指定域名地址 |
| fileName    | String   | 文件上传后的文件名称        | UUID.type                                             |

## 11 文件删除业务接口

- 请求路径: http://localhost:8091/file/deleteFile
- 请求类型: delete
- 请求参数:

| 参数名称    | 参数说明             | 备注                       |
| ----------- | -------------------- | -------------------------- |
| virtualPath | 文件上传的虚拟的路径 | 删除时需要磁盘路径一起删除 |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |

## 12 商品新增业务接口

- 请求路径: http://localhost:8091/item/saveItem
- 请求类型: post
- 前端传递参数分析

```json
	{
		item: {
			images: "/2021/05/20/da0c1d4781c1499399f090da8b60f359.jpg,/2021/05/20/2ac1c34776a7465887eb019655354c3c.jpg"
			itemCatId: 560
			num: "100"
			price: 718800
			sellPoint: "【华为官方直供,至高12期免息0首付,原装正品】送华为原装无线充+运动蓝牙耳机+蓝牙音箱+三合一多功能数据线+钢化膜等！"
			title: "华为P40 Pro 5G手机【12期免息可选送豪礼】全网通智能手机"
		},
		itemDesc: {
				itemDesc: "<ul><li>品牌：&nbsp;<a href=https://list.jd.com/list.html".......      "
		},
		itemParam: {
			dynamicArray: [
							{paramId: 1, paramVals: "亮黑色,釉白色"}, 
							{paramId: 2, paramVals: "8GB+128GB,8GB+256GB"}
						   ],
			staticArray: [
				 	{"paramId": 3,"paramVals": "华为Mate 40 Pro"},
				    {"paramId": 4,"paramVals": "0.575kg"}.....
			 		]
		}
	}

```

- 请求参数: 使用ItemVO对象接收

| 参数名称  | 参数类型  | 参数说明             | 备注       |
| --------- | --------- | -------------------- | ---------- |
| item      | Item      | 商品基本信息对象封装 | 不能为null |
| itemDesc  | ItemDesc  | 商品详情信息         | 不能为null |
| itemParam | ItemParam | 商品参数信息         | 不能为null |

- ItemVO参数详解:
- Item对象

| 参数名称  | 参数类型 | 参数说明         | 备注                           |
| --------- | -------- | ---------------- | ------------------------------ |
| title     | String   | 商品标题信息     | 不能为null                     |
| sellPoint | String   | 商品卖点信息     | 不能为null                     |
| price     | Integer  | 商品价格信息     | 不能为null 需要将数据扩大100倍 |
| num       | Integer  | 商品数量信息     | 不能为null                     |
| images    | String   | 商品图片地址信息 | 不能为null                     |
| itemCatId | Integer  | 商品父级分类ID   | 不能为null                     |
| status    | Boolean  | 商品状态信息     | 不能为null                     |

- itemDesc 对象

- ```
   	为了降低商品提交代码的耦合性,将大字段信息详情,采用ItemDesc对象进行封装
  ```

| 参数名称 | 参数类型 | 参数说明     | 备注                                                      |
| -------- | -------- | ------------ | --------------------------------------------------------- |
| id       | Integer  | 商品Id信息   | 因为Item和ItemDesc是一对一关系 所以需要依赖Item对象的Id值 |
| itemDesc | String   | 商品详情信息 | 内部包含了大量的html语句                                  |

- itemParam对象

- ```
    	由于每个商品的动态参数和静态属性都不相同.所以需要单独封装
  ```

| 参数名称     | 参数类型 | 参数说明                                        | 备注                                                         |
| ------------ | -------- | ----------------------------------------------- | ------------------------------------------------------------ |
| id           | Integer  | 商品Id信息                                      | **前端传值为null** 因为Item和ItemParam是一对一关系 所以需要依赖Item对象的Id值, |
| dynamicArgs  | String   | **前端传值为null** 将商品所有的动态参数进行封装 | 将dynamicArray使用JSON格式保存 格式如下: [ {“paramId”:1,“paramVals”:“亮黑色,黑色”}, {“paramId”:2,“paramVals”:“8GB+128GB,8GB+512GB”}] |
| staticArgs   | String   | 将商品所有的静态属性进行封装                    | **前端传值为null** 将staticArray使用JSON格式保存 格式如下: [ { “paramId”:3,“paramVals”:“华为Mate 40 Pro”},{“paramId”:4,“paramVals”:“0.575kg”}] 前端传值为null |
| dynamicArray | String   | 用来接收页面提交的动态参数信息                  | 该参数不是数据库记录,只用作参数接收                          |
| staticArray  | String   | 用来接收页面提交的静态属性信息                  | 该参数不是数据库记录,只用作参数接收                          |

- ItemParamVO对象

| 参数名称  | 参数类型 | 参数说明     | 备注       |
| --------- | -------- | ------------ | ---------- |
| paramId   | Integer  | 商品参数Id   | 不能为null |
| paramVals | String   | 商品参数的值 | 不能为null |

- 返回值结果:

| 参数名称 | 参数说明             | 备注                                    |
| -------- | -------------------- | --------------------------------------- |
| status   | 状态信息             | 200表示服务器请求成功 201表示服务器异常 |
| msg      | 服务器返回的提示信息 | 可以为null                              |
| data     | 服务器返回的业务数据 | 可以为null                              |
