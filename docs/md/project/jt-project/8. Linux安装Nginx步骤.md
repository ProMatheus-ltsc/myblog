# Linux安装Nginx步骤
[[TOC]]

# 1. Nginx安装步骤

## 1.1 官网介绍

```java
http://nginx.org/en/download.html
```

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109162311248.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

## 1.2 上传安装包

上传到指定目录中 /usr/local/src

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109162625422.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

## 1.3 解压Nginx 压缩文件

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109162828357.png#pic_center)

1.删除安装文件

```java
 rm -f nginx-1.21.3.tar.gz
```

2.修改文件名称

```java
 mv nginx-1.19.4   nginx-source
```

## 1.4 关于nginx 目录说明

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109163436983.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

改完名称之后的结果:

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201204113159924.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)


## 1.5 安装nginx服务器

说明:在nginx-source的根目录中执行如下命令

0. 需要提前安装nginx的依赖项

```java
 yum -y install gcc pcre-devel zlib-devel openssl openssl-devel
```

1. ./configure
   
   ![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109163916820.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

   直接结果:

   ![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109164120137.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

**问题补充: 如果 ./configure 报错没有权限,则执行如下命令**

```xml
	chmod + x configure
```

1. 在nginx-source的根目录中 执行 make
   
   ![在这里插入图片描述](https://img-blog.csdnimg.cn/09c185f6947c4a2eb93a90df8aa21360.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6Zeq6ICA5aSq6Ziz,size_20,color_FFFFFF,t_70,g_se,x_16)

   ![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109164246196.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

2. 根目录中执行 make install
   
   ![在这里插入图片描述](https://img-blog.csdnimg.cn/e46db50d9c0f43f8b90f5fa5b9eb10bb.png)

   ![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109164343907.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

## 1.6 Nginx工作目录说明

说明: 查找工作目录
路径: whereis nginx

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201204113418828.png)

## 1.7 跳转到Nginx工作目录

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201204113522286.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)

## 1.7.1 nginx命令

进入nginx/sbin目录中执行

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020120411362941.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)

1.启动命令: ./nginx
2.重启命令: ./nginx -s reload
3.关闭命令: ./nginx -s stop

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201204113707889.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)

## 1.7 上传前端静态资源

说明: 将前端的web资源上传到nginx的根目录下.

1. 前端文件位置
   
   ![在这里插入图片描述](https://img-blog.csdnimg.cn/e91f9feaeaed4baaa0d12d6254f35b89.png)

   2.上传目录位置

   ![在这里插入图片描述](https://img-blog.csdnimg.cn/781221561dee4235895d77b3b33781c7.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6Zeq6ICA5aSq6Ziz,size_20,color_FFFFFF,t_70,g_se,x_16)

## 1.7 修改nginx配置文件

![在这里插入图片描述](https://img-blog.csdnimg.cn/20201109165642426.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

需求说明:
1.实现图片反向代理
2.前端业务代理
3.后端tomcat集群代理

```java
#配置图片代理 image.jt.com
	server {
		listen 80;
		server_name image.jt.com;
		location / {
			root /usr/local/src/images;
		}
	}
	
	#配置前端代理 www.jt.com
	server {
		listen 80;
		server_name www.jt.com;
		location / {
			root  dist;
			index index.html;
		}
	}

	#配置后台服务器集群
	upstream tomcats{
		server 192.168.126.129:8091;
		server 192.168.126.129:8092;
		server 192.168.126.129:8093;
	}
	
	#配置后端代理 manage.jt.com
	server {
		listen 80;
		server_name manage.jt.com;

		location / {
			proxy_pass http://tomcats;
		}
	}
```

编辑成功之后,将nginx.conf文件上传到Linux系统中(删除原有文件),

![在这里插入图片描述](https://img-blog.csdnimg.cn/02a6fcff1a0049cdba6edb7bbba5d584.png)

上传之后重启nginx服务:

![在这里插入图片描述](https://img-blog.csdnimg.cn/b92104bac3334ca0a0c86ba0412786ea.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6Zeq6ICA5aSq6Ziz,size_20,color_FFFFFF,t_70,g_se,x_16)

## 1.8 修改hosts文件

```java
#  IP 与   域名映射
#	127.0.0.1       localhost
#	::1             localhost

#图片服务器配置
#127.0.0.1       image.jt.com
192.168.126.129  image.jt.com
#前端服务器配置
#127.0.0.1       www.jt.com
192.168.126.129  www.jt.com
#后端服务器配置
#127.0.0.1       manage.jt.com
192.168.126.129  manage.jt.com
```

## 1.9 项目发布测试

### 1.9.1 后端测试

测试地址: http://manage.jt.com/rights/findAll

![在这里插入图片描述](https://img-blog.csdnimg.cn/2a1d67d246e04548b4dd3d42b5ba5d4e.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6Zeq6ICA5aSq6Ziz,size_20,color_FFFFFF,t_70,g_se,x_16)

### 1.9.2 前端测试

测试地址: http://www.jt.com

![在这里插入图片描述](https://img-blog.csdnimg.cn/4948dc95921b49a69b8583a9aebe826d.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6Zeq6ICA5aSq6Ziz,size_20,color_FFFFFF,t_70,g_se,x_16)

### 1.9.3 图片测试

1.实现图片的上传

![在这里插入图片描述](https://img-blog.csdnimg.cn/d2cf5394918f4919ae2fa23e5b04d8cf.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6Zeq6ICA5aSq6Ziz,size_20,color_FFFFFF,t_70,g_se,x_16)

2.检查上传路径

![在这里插入图片描述](https://img-blog.csdnimg.cn/e541ee58329d42ba97da47ddee0799bb.png)

3.检查图片回显

![在这里插入图片描述](https://img-blog.csdnimg.cn/2eefd7ea2c0a4c639a74acf2c1a490a8.png?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBA6Zeq6ICA5aSq6Ziz,size_20,color_FFFFFF,t_70,g_se,x_16)