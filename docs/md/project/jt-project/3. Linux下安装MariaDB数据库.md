# Linux下安装MariaDB数据库

[[TOC]]

  

## 1. 下载MariaDB数据库

  

测试: 当前虚拟机是否可以正确的链接外网.

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907164450545.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  


命令:

  

```java

[root@localhost src]# yum install mariadb-server 安装mariadb数据库

[root@localhost src]# yum clean all 清空已安装文件 如果下载失败之后执行的.


```

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/202009071623596.png#pic_center)

  

## 2 确认下载

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907162536298.png#pic_center)

  

## 3 安装完成提示

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907163023475.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

## 4 数据库启动

  

命令:

  

```java

1. 启动命令 [root@localhost src]# systemctl start mariadb

2. 重启命令 [root@localhost src]# systemctl restart mariadb

3. 关闭命令 [root@localhost src]# systemctl stop mariadb

4. 设定开机自起 [root@localhost src]# systemctl enable mariadb

5. 关闭开机自起 [root@localhost src]# systemctl disable mariadb

  

```

  

## 5. 数据库初始化操作

  

命令: mysql_secure_installation

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/9048d68db2a649f5aa0a715723eaa3bf.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020090716550981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

## 6. 测试数据库用户名和密码是否有效

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907165746693.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

## 8.Mysql数据库远程访问配置

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907170448382.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

### 8.1 关于链接数据库的说明

  

说明:

1. 如果需要远程链接数据库必须通过防火墙

2. 如果远程链接数据库,数据库中必须开启远程访问权限才行,否则拒绝链接.

  

### 8.2 配置数据库权限配置说明

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907171156495.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

### 8.3 配置Linux数据库权限

  

#### 8.3.1 切换数据库mysql

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907171345613.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

切换Mysql数据库

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907171433498.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

#### 8.3.2 修改数据库表

  

1).检查数据表

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907171540623.png#pic_center)

  

2).查询user表中的host/root/password

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907171734287.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

3).将host=“localhost” 改为 “%”

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907172027970.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

4).刷新数据库权限

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020090717223130.png#pic_center)

  


## 9. 配置Linux防火墙策略

  

### 9.1 检查防火墙状态

  

命令: `firewall-cmd --state`

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907172614549.png#pic_center)

  

### 9.2 防火墙配置

  

说明:防火墙中有一个配置文件,表示当Linux系统启动时防火墙应该如何操作!!!

需求: 告诉linux系统以后开机不需要启动防火墙

命令: `systemctl disable firewalld.service`

`systemctl enable firewalld.service`

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907173054365.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

### 9.3 手动关闭防火墙

  

说明:通过命令手动将防火墙关闭

命令:

1. systemctl stop firewalld.service

2. systemctl start firewalld.service

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907173306469.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

### 9.4 手动开放防火墙端口

  

1). 检查防火墙开放的端口

  

```java

firewall-cmd --list-ports

  

```

  

2).检查端口是否开放

  

```java

firewall-cmd --query-port 80/tcp

  

```

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200908092141613.png#pic_center)

  

3). 开启防火墙

  

```java

firewall-cmd --zone=public --add-port=80/tcp --permanent

```

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200908092733929.png#pic_center)

  

4).移除端口

  

```java

firewall-cmd --zone=public --remove-port=9090/tcp --permanent

```

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200908093014985.png#pic_center)

  

5).关于防火墙操作的解释

  

–zone #作用域

  

–add-port=80/tcp #添加端口，格式为：端口/通讯协议

  

–remove-port=80/tcp #移除端口，格式为：端口/通讯协议

  

–permanent #永久生效，没有此参数重启后失效

  

6).重启防火墙

  

```java

firewall-cmd --reload

```

  

### 9.5 数据库远程测试

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020090717342028.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

### 9.6 导入京淘数据库

  

#### 9.6.1 备份数据库

  

1. 点击备份操作

![在这里插入图片描述](https://img-blog.csdnimg.cn/2021071516312173.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)

  

2. 选择导出的位置

![在这里插入图片描述](https://img-blog.csdnimg.cn/2021071516323656.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)

  

#### 9.6.2 导入数据库

  

1.点击导入

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/2021071516341228.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70)

  

2. 导入数据之后执行刷新即可.

3.

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200907173658422.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)

  

方式2:

如果mysql数据库需要导入数据表命令如下:

命令: source /xxx/xxxx/xxxx/jt.sql;

  

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020090717021080.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE2ODA0ODQ3,size_16,color_FFFFFF,t_70#pic_center)



#### 9.6.3 navi cat导入数据库



**1**：打开navicat后，点开localhost_3036,右击点击新建数据库：

![在这里插入图片描述](https://img-blog.csdnimg.cn/ba158a2304114ce392689305e4620f19.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWmhlbmduaWFuIFpoYW5n,size_18,color_FFFFFF,t_70,g_se,x_16)

**2：左键点击新建数据库后，创建一个跟你需要导入的数据库名字一模一样的新的mysql数据库。（就相当于你造了一个外壳一模一样的房子，然后再把内部的精髓导入进去)，记得选择字符集和排列数序。**

![在这里插入图片描述](https://img-blog.csdnimg.cn/05b8c9253af94c32b14c3ca6fc9bed3c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWmhlbmduaWFuIFpoYW5n,size_12,color_FFFFFF,t_70,g_se,x_16)

**3：创建完成后，在左侧便会出现db838，接下去是最关键的一步：右键点击db838，点击“运行sql文件”**

![在这里插入图片描述](https://img-blog.csdnimg.cn/6f076c5cec3a4ddc9cc79f1ed5258a2c.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWmhlbmduaWFuIFpoYW5n,size_17,color_FFFFFF,t_70,g_se,x_16)

**4：选择需要导入的.sql数据库文件，并导入进去：**

![请添加图片描述](https://img-blog.csdnimg.cn/fd6dcdad160a4a3b94ab3514c00c8ae1.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWmhlbmduaWFuIFpoYW5n,size_11,color_FFFFFF,t_70,g_se,x_16)

**5：点击开始后，即可成功导入：**

![请添加图片描述](https://img-blog.csdnimg.cn/69ec05d0f3354bc2b088597ca618f7ae.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWmhlbmduaWFuIFpoYW5n,size_11,color_FFFFFF,t_70,g_se,x_16)

**6：这是最后一步了，一定要点击db838，然后按住F5进行刷新，否则的话会显示不出导入的文件：**

![请添加图片描述](https://img-blog.csdnimg.cn/659d92ea32344556926de203292acab0.png?x-oss-process=image/watermark,type_d3F5LXplbmhlaQ,shadow_50,text_Q1NETiBAWmhlbmduaWFuIFpoYW5n,size_20,color_FFFFFF,t_70,g_se,x_16)